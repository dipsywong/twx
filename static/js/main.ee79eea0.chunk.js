(this.webpackJsonptwx=this.webpackJsonptwx||[]).push([[0],{107:function(e,t,n){},183:function(e,t,n){},185:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(0),r=n(10),i=n.n(r),s=(n(107),n(20)),o=n(94),l=n(225),j=n(226),d=n(227),u=n(233),b=n(228),h=n(229),f=n(219),O=n(216),x=n(187),p=n(190),m=n(93),y=n(11),g=n(62),v=n(224),w=n(189),k=n(95),S=n(68),C=n.n(S),A=n(90),E=n(91),I=n.n(E),N=function(e){return function(){var t=Object(A.a)(C.a.mark((function t(n){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){var a=new FileReader;switch(a.addEventListener("load",(function(e){var n;return t(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.result)})),e){case"readAsDataURL":case"dataURL":case"base64":a.readAsDataURL(n);break;case"readAsText":case"text":a.readAsText(n);break;case"buffer":case"arrayBuffer":case"readAsArrayBuffer":a.readAsArrayBuffer(n);break;case"bs":case"binaryString":case"readAsBinaryString":a.readAsBinaryString(n);break;default:throw new Error("readFile received an unknown option ".concat(e))}})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},J=(N("readAsDataURL"),N("readAsText"),N("readAsArrayBuffer"),N("readAsBinaryString")),B=n(96),D=n(223),L=n(235),T=n(231),F=n(236),R=n(92),P=n.n(R),U=n(27),W=function(e){var t=e.data,n="light"===Object(U.a)().palette.type;return Object(a.jsx)(P.a,{data:t,theme:{scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},invertTheme:n})},M=function(e){var t=e.raw,n=e.defaultShow,r=e.name,i=Object(c.useState)(null!==n&&void 0!==n?n:0),o=Object(s.a)(i,2),l=o[0],j=o[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(O.a,{children:[Object(a.jsx)(x.a,{onClick:function(){return j(0)},disabled:0===l,children:"Hide JSON"}),Object(a.jsx)(x.a,{onClick:function(){return j(1)},disabled:1===l,children:"Tree JSON"}),Object(a.jsx)(x.a,{onClick:function(){return j(2)},disabled:2===l,children:"Raw JSON"})]}),Object(a.jsxs)(O.a,{style:{marginLeft:"8px"},children:[Object(a.jsx)(x.a,{onClick:function(){return function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(JSON.stringify(t,null,2))},children:"Copy JSON"}),Object(a.jsx)(x.a,{onClick:function(){return function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(JSON.stringify(t,null,2),void 0!==r?"".concat(r,".json"):"download.json")},children:"Download JSON"})]}),1===l&&Object(a.jsx)(W,{data:t}),2===l&&Object(a.jsx)("pre",{children:JSON.stringify(t,null,2)})]})},$=n(234),z=n(218),G=n(220),H=n(221),_=n(222),q=n(43),K=n.n(q),Q=function(e){var t=e.check,n=e.index;return Object(a.jsxs)(w.a,{className:"cell",style:{color:"white",backgroundColor:"#1b5e20"},children:[Object(a.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["[\u6aa2\u67e5-",n,"] ",t.type," "]}),Object(a.jsx)("span",{style:{color:"hsla(0,0%,100%,.7)"},children:JSON.stringify(t)})]})},V=function(e){var t=e.action,n=e.index;return Object(a.jsxs)(w.a,{className:"cell",style:{color:"white",backgroundColor:"#01579b"},children:[Object(a.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["[\u52d5\u4f5c-",n,"] ",t.type," "]}),Object(a.jsx)("span",{style:{color:"hsla(0,0%,100%,.7)"},children:JSON.stringify(t)})]})},X=function(e){var t=e.event,n=e.eventName,r=Object(c.useMemo)((function(){var e=[];t.itime&&e.push("\u555f\u52d5\u6642\u9593\u6216".concat(t.itime,"\u6beb\u79d2")),t.delay&&e.push("\u5ef6\u9072\u767c\u52d5".concat(t.delay,"\u6beb\u79d2")),t.rep&&e.push("\u91cd\u8907".concat(t.rep,"\u6b21")),t.repInt&&e.push("\u91cd\u8907\u9593\u9694".concat(t.repInt,"\u6beb\u79d2")),t.recInt&&e.push("\u91cd\u8907\u6aa2\u67e5\u9593\u9694".concat(t.recInt,"\u6beb\u79d2"));var a=["tag","act","uo","cks","repInt","rep","itime","delay","recInt"];return Object.keys(t).forEach((function(e){a.includes(e)||console.error("event ".concat(n," contains unknown key ").concat(e))})),e.join(",")}),[t,n]);return Object(a.jsxs)($.a,{TransitionProps:{unmountOnExit:!0},children:[Object(a.jsxs)(z.a,{expandIcon:Object(a.jsx)(K.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:[Object(a.jsxs)(f.a,{children:["\u4e8b\u4ef6 ",n]}),""!==r&&Object(a.jsx)(f.a,{component:"p",variant:"caption",style:{alignSelf:"baseline",marginLeft:"8px"},children:r}),Object(a.jsx)("div",{style:{flex:1}}),Object(a.jsx)(f.a,{component:"p",variant:"caption",style:{alignSelf:"baseline"},children:t.tag})]}),Object(a.jsx)(G.a,{children:Object(a.jsxs)(H.a,{direction:"column",container:!0,children:[Object(a.jsxs)(_.a,{children:[t.cks.map((function(e,t){return Object(a.jsx)(Q,{check:e,index:t},t)})),t.act.map((function(e,t){return Object(a.jsx)(V,{action:e,index:t},t)}))]}),Object(a.jsx)(u.a,{children:Object(a.jsx)(M,{raw:t,defaultShow:0})})]})})]})},Y=function(e){var t=e.inf;return Object(a.jsxs)($.a,{children:[Object(a.jsx)(z.a,{expandIcon:Object(a.jsx)(K.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(a.jsx)(f.a,{children:"Mission Info"})}),Object(a.jsx)(G.a,{children:Object(a.jsxs)(H.a,{style:{maxWidth:"100%"},spacing:1,container:!0,direction:"column",children:[Object(a.jsxs)(H.a,{item:!0,children:["mission name: ",t.n]}),Object(a.jsx)(H.a,{item:!0,children:"mission description:"}),Object(a.jsx)(H.a,{style:{maxWidth:"100%"},children:t.dp.split(/[\n\r]+/g).map((function(e,t){return Object(a.jsx)("div",{style:{lineBreak:"auto",maxWidth:"100%"},children:e},t)}))}),Object(a.jsxs)(H.a,{item:!0,children:["mission goal: ",t.go]}),Object(a.jsxs)(H.a,{item:!0,children:["mission fail: ",t.fa]}),Object(a.jsxs)(H.a,{item:!0,children:["camps: ",t.cs.join(",")]}),Object(a.jsxs)(H.a,{item:!0,children:["minplayers: ",t.minp]}),Object(a.jsxs)(H.a,{item:!0,children:["author: ",t.sn," (",t.su,")"]}),Object(a.jsxs)(H.a,{item:!0,children:["ability: ",t.ab]}),Object(a.jsxs)(H.a,{item:!0,children:["ri: ",t.ri.length>0?t.ri.join(","):Object(a.jsx)("i",{children:"none"})]}),Object(a.jsx)(M,{raw:t})]})})]})},Z=function(e){var t=e.json,n=e.name;return Object(a.jsxs)($.a,{children:[Object(a.jsx)(z.a,{expandIcon:Object(a.jsx)(K.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(a.jsx)(f.a,{children:n})}),Object(a.jsx)(G.a,{children:Object(a.jsx)(u.a,{children:Object(a.jsx)(M,{raw:t,defaultShow:1})})})]})},ee=function(e){var t=e.twf,n=Object(c.useMemo)((function(){var e=t.inf,n=t.ini,a=t.map,c=Object(B.a)(t,["inf","ini","map"]),r=[],i=[],o=[],l=new Set;Object.entries(c).forEach((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];if(n.startsWith("ro"))r.push([n,a]);else if(n.startsWith("music"))o.push([n,a]);else{var c,j=a;i.push([n.replace("evt_",""),j]),null===(c=j.tag)||void 0===c||c.split(",").forEach((function(e){return l.add(e)}))}}));var j=Object.fromEntries(i.sort((function(e,t){return e[1].uo-t[1].uo})));return console.log(function(e){var t={},n={};return e.forEach((function(e){try{e.cks.forEach((function(e){e.type in t?t[e.type].push(e):t[e.type]=[e]})),e.act.forEach((function(e){e.type in n?n[e.type].push(e):n[e.type]=[e]}))}catch(a){console.log(e,a)}})),{checkExamples:t,actionExamples:n}}(Object.values(j))),{roles:r,inf:e,ini:n,map:a,events:j,musics:o,tags:Array.from(l)}}),[t]),r=n.inf,i=n.ini,o=n.map,l=n.roles,j=n.events,d=n.musics,b=n.tags,h=Object(c.useState)(""),f=Object(s.a)(h,2),O=f[0],x=f[1];return Object(a.jsxs)(u.a,{onClick:function(e){return e.stopPropagation()},style:{height:"100%"},children:[Object(a.jsxs)(u.a,{style:{margin:"8px 0",display:"flex",justifyContent:"space-between",alignItems:"baseline"},children:[Object(a.jsx)(u.a,{children:Object(a.jsx)(M,{raw:t,name:t.inf.n})}),Object(a.jsxs)(D.a,{children:[Object(a.jsx)(L.a,{children:"Tag"}),Object(a.jsxs)(T.a,{value:O,onChange:function(e){return x(e.target.value)},children:[Object(a.jsx)(F.a,{value:"",children:" - "}),b.map((function(e){return Object(a.jsx)(F.a,{value:e,children:e},e)}))]})]})]}),Object(a.jsx)(Y,{inf:r}),Object(a.jsx)(Z,{json:o,name:"map"}),Object(a.jsx)(Z,{json:i,name:"spawn point"}),Object(a.jsx)(Z,{json:l,name:"".concat(l.length," roles")}),Object(a.jsx)(Z,{json:Object.fromEntries(d),name:"".concat(d.length," musics")}),Object.entries(j).filter((function(e){var t,n=Object(s.a)(e,2),a=(n[0],n[1]);return""===O||(null===(t=a.tag)||void 0===t?void 0:t.includes(O))})).map((function(e){var t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(a.jsx)(X,{event:c,eventName:n},n)})),Object(a.jsx)("div",{style:{height:"24px"}})]})},te=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(c.useCallback)((function(e){var t;(t=e[0],J(t).then((function(e){return I.a.inflate(e)})).then((function(e){return new TextDecoder("utf-8").decode(e)})).then((function(e){var t=e.indexOf("{"),n=e.lastIndexOf("}");return e.slice(t,n+1).replace(/([,{])(\d+):/g,'$1"$2":')})).then(JSON.parse)).then(r)}),[]),o=Object(k.a)({onDrop:i}),l=o.getRootProps,j=o.getInputProps;return Object(a.jsx)(u.a,Object(g.a)(Object(g.a)({style:{flex:1,overflow:"auto",paddingBottom:"16px"}},null===n?l():{}),{},{children:Object(a.jsxs)(v.a,{style:{height:"100%"},children:[Object(a.jsx)("input",Object(g.a)({},j())),null===n&&Object(a.jsx)(u.a,{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center",height:"100%"},children:Object(a.jsx)(u.a,{children:Object(a.jsx)(w.a,{style:{padding:"30px"},children:"Drag and drop a twf file here, or click to open"})})}),null!==n&&Object(a.jsx)(ee,{twf:n})]})}))},ne=(n(183),n(230)),ae=Object(o.a)({palette:{type:"dark"}}),ce=Object(o.a)({palette:{type:"light"}});var re=function(){var e=Object(c.useState)(Object(l.a)("(prefers-color-scheme: dark)")),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(a.jsxs)(j.a,{theme:n?ae:ce,children:[Object(a.jsx)(d.a,{}),Object(a.jsx)(m.a,{children:Object(a.jsxs)(u.a,{flexDirection:"column",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex"},children:[Object(a.jsx)(b.a,{position:"static",children:Object(a.jsxs)(h.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)(f.a,{variant:"h6",children:"\u540c\u4eba\u9663\u8b80\u6a94\u5668"}),Object(a.jsxs)(O.a,{variant:"text",color:"inherit",children:[Object(a.jsx)(x.a,{href:"//dipsy.me/twmap/",children:"\u820a\u8b80\u6a94\u5668(twf,twm,twr,var,sav)"}),Object(a.jsx)(x.a,{href:"//gamelet.online/",children:"\u560e\u59c6\u64c2\u53f0"}),Object(a.jsx)(x.a,{href:"//code.gamelet.com/",children:"Code.Gamelet"}),Object(a.jsx)(x.a,{href:"https://light-up.gamelet.online/",children:"\u5149\u5f71\u8ff7\u57ce"}),Object(a.jsx)(x.a,{href:"https://poker99.gamelet.online/",children:"\u7ae5\u8a7199"}),Object(a.jsx)(x.a,{href:"https://magile.gamelet.online/",children:"\u9b54\u6cd5\u98db\u5f48\u5927\u4f5c\u6230"}),Object(a.jsx)(p.a,{title:"Light/Dark Mode",onClick:function(){return r(!n)},children:Object(a.jsx)(ne.a,{})})]})]})}),Object(a.jsx)(y.c,{children:Object(a.jsx)(y.a,{path:"/",children:Object(a.jsx)(te,{})})})]})})]})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,239)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(a.jsx)(re,{}),document.getElementById("root")),ie()}},[[185,1,2]]]);
//# sourceMappingURL=main.ee79eea0.chunk.js.map