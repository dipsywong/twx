{"version":3,"sources":["utils/readFile.ts","components/JsonTree.tsx","components/ClickShowRaw.tsx","utils/copyToClipboard.ts","utils/download.ts","components/EventShower.tsx","components/MissionInfoShower.tsx","components/JsonShower.tsx","components/TwfShower.tsx","utils/twfEventAnalysis.ts","pages/ReadTwfPage.tsx","components/App.tsx","reportWebVitals.ts","index.tsx"],"names":["readFile","target","file","a","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","readAsText","readAsArrayBuffer","readAsBinaryString","Error","readFileAsBinaryString","JsonTree","data","isLightTheme","useTheme","palette","type","theme","scheme","author","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","invertTheme","ClickShowRaw","raw","defaultShow","name","useState","show","setShow","ButtonGroup","Button","onClick","disabled","style","marginLeft","str","el","document","createElement","value","body","appendChild","select","execCommand","removeChild","copyToClipboard","JSON","stringify","text","filename","element","setAttribute","encodeURIComponent","display","click","download","undefined","CheckCell","check","index","Paper","className","color","backgroundColor","whiteSpace","ActionCell","action","EventShower","event","eventName","eventMetaString","useMemo","strs","itime","push","delay","rep","repInt","recInt","knownKeys","Object","keys","forEach","k","includes","console","error","join","Accordion","TransitionProps","unmountOnExit","AccordionSummary","expandIcon","aria-controls","id","Typography","component","variant","alignSelf","flex","tag","AccordionDetails","Grid","direction","container","List","cks","map","act","Box","MissionInfoShower","inf","maxWidth","spacing","item","n","dp","split","lineBreak","go","fa","cs","minp","sn","su","ab","ri","length","JsonShower","json","TwfShower","twf","ini","rest","roles","allEvents","musics","tags","Set","entries","key","startsWith","replace","t","add","events","fromEntries","sort","b","uo","log","checkExamples","actionExamples","e","twfEventAnalysis","values","Array","from","filterTag","setFilterTag","stopPropagation","height","margin","justifyContent","alignItems","FormControl","InputLabel","Select","onChange","MenuItem","filter","content","ReadTwfPage","setTwf","onDrop","useCallback","acceptedFiles","then","bs","pako","inflate","buf","TextDecoder","decode","s1","start","indexOf","end","lastIndexOf","slice","parse","useDropzone","getRootProps","getInputProps","overflow","paddingBottom","Container","flexDirection","alignContent","padding","darkTheme","createMuiTheme","lightTheme","App","useMediaQuery","isDarkMode","setIsDarkMode","CssBaseline","position","top","left","right","bottom","AppBar","Toolbar","href","IconButton","title","Brightness7","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.ee79eea0.chunk.js","sourcesContent":["import pako from 'pako'\n\nconst readFile = (target: string) => async (file: Blob): Promise<string | ArrayBuffer | null | undefined> => new Promise((resolve) => {\n  const reader = new FileReader()\n  reader.addEventListener(\n    'load',\n    (reader) => (\n      resolve(reader?.target?.result)\n    )\n  )\n  switch (target) {\n    case 'readAsDataURL':\n    case 'dataURL':\n    case 'base64':\n      reader.readAsDataURL(file)\n      break\n    case 'readAsText':\n    case 'text':\n      reader.readAsText(file)\n      break\n    case 'buffer':\n    case 'arrayBuffer':\n    case 'readAsArrayBuffer':\n      reader.readAsArrayBuffer(file)\n      break\n    case 'bs':\n    case 'binaryString':\n    case 'readAsBinaryString':\n      reader.readAsBinaryString(file)\n      break\n    default:\n      throw new Error(`readFile received an unknown option ${target}`)\n  }\n})\n\nconst readFileAsDataURL: (file: File) => Promise<string> = readFile('readAsDataURL') as (file: File) => Promise<string>\nconst readFileAsText: (file: File) => Promise<string> = readFile('readAsText') as (file: File) => Promise<string>\nconst readFileAsArrayBuffer: (file: File) => Promise<ArrayBuffer> = readFile('readAsArrayBuffer') as (file: File) => Promise<ArrayBuffer>\nconst readFileAsBinaryString: (file: File) => Promise<string> = readFile('readAsBinaryString') as (file: File) => Promise<string>\nconst readTwxFileAsJson: <T>(file: File) => Promise<T> = (file: File) => (\n  readFileAsBinaryString(file)\n    .then(bs => pako.inflate(bs))\n    .then(buf => new TextDecoder('utf-8').decode(buf))\n    .then((s1 => {\n      const start = s1.indexOf('{')\n      const end = s1.lastIndexOf('}')\n      const s2 = s1.slice(start, end + 1).replace(/([,{])(\\d+):/g, '$1\"$2\":')\n      return s2\n      // return JSON.parse(s2)\n    }))\n    .then(JSON.parse)\n)\nexport default readFile\n\nexport {\n  readFileAsDataURL,\n  readFileAsText,\n  readFileAsArrayBuffer,\n  readFileAsBinaryString,\n  readTwxFileAsJson\n}\n","import React, { FunctionComponent } from 'react'\nimport JSONTree from 'react-json-tree'\nimport { useTheme } from '@material-ui/core'\n\nexport const JsonTree: FunctionComponent<{ data: unknown }> = ({ data }) => {\n  const theme = {\n    scheme: 'monokai',\n    author: 'wimer hazenberg (http://www.monokai.nl)',\n    base00: '#272822',\n    base01: '#383830',\n    base02: '#49483e',\n    base03: '#75715e',\n    base04: '#a59f85',\n    base05: '#f8f8f2',\n    base06: '#f5f4f1',\n    base07: '#f9f8f5',\n    base08: '#f92672',\n    base09: '#fd971f',\n    base0A: '#f4bf75',\n    base0B: '#a6e22e',\n    base0C: '#a1efe4',\n    base0D: '#66d9ef',\n    base0E: '#ae81ff',\n    base0F: '#cc6633'\n  }\n  const isLightTheme = useTheme().palette.type === 'light'\n  return (\n    <JSONTree data={data} theme={theme} invertTheme={isLightTheme}/>\n  )\n}\n","import { FunctionComponent, useState } from 'react'\nimport { Button, ButtonGroup } from '@material-ui/core'\nimport { JsonTree } from './JsonTree'\nimport { copyToClipboard } from '../utils/copyToClipboard'\nimport { download } from '../utils/download'\n\nexport const ClickShowRaw: FunctionComponent<{ raw: unknown, defaultShow?: number, name?: string }> = (\n  {\n    raw,\n    defaultShow,\n    name\n  }) => {\n  const [show, setShow] = useState(defaultShow ?? 0)\n  return (\n    <>\n      <ButtonGroup>\n        <Button onClick={() => setShow(0)} disabled={show === 0}>Hide JSON</Button>\n        <Button onClick={() => setShow(1)} disabled={show === 1}>Tree JSON</Button>\n        <Button onClick={() => setShow(2)} disabled={show === 2}>Raw JSON</Button>\n      </ButtonGroup>\n      <ButtonGroup style={{ marginLeft: '8px' }}>\n        <Button onClick={() => copyToClipboard(JSON.stringify(raw, null, 2))}>Copy JSON</Button>\n        <Button\n          onClick={() => download(JSON.stringify(raw, null, 2), name !== undefined ? `${name}.json` : 'download.json')}>\n          Download JSON\n        </Button>\n      </ButtonGroup>\n      {show === 1 && <JsonTree data={raw}/>}\n      {show === 2 && (\n        <pre>\n          {JSON.stringify(raw, null, 2)}\n        </pre>\n      )}\n    </>\n  )\n\n}\n","export const copyToClipboard = (str: string): void => {\n  const el = document.createElement('textarea')\n  el.value = str\n  document.body.appendChild(el)\n  el.select()\n  document.execCommand('copy')\n  document.body.removeChild(el)\n}\n","export const download = (text: string, filename: string) => {\n  const element = document.createElement('a')\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text))\n  element.setAttribute('download', filename)\n\n  element.style.display = 'none'\n  document.body.appendChild(element)\n\n  element.click()\n\n  document.body.removeChild(element)\n}\n","import React, { FunctionComponent, useMemo } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Grid, List, Paper, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { TwfAct, TwfCheck, TwfEvent } from '../type'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nconst CheckCell: FunctionComponent<{ check: TwfCheck, index: number }> = ({ check, index }) => {\n  return (\n    <Paper\n      className={'cell'}\n      style={{\n        color: 'white',\n        backgroundColor: '#1b5e20'\n      }}>\n      <span style={{ whiteSpace: 'nowrap' }}>\n        [檢查-{index}] {check.type}{' '}\n      </span>\n      <span style={{ color: 'hsla(0,0%,100%,.7)' }}>\n        {JSON.stringify(check)}\n      </span>\n    </Paper>\n  )\n}\n\nconst ActionCell: FunctionComponent<{ action: TwfAct, index: number }> = ({ action, index }) => {\n  return (\n    <Paper\n      className={'cell'}\n      style={{\n        color: 'white',\n        backgroundColor: '#01579b'\n      }}>\n      <span style={{ whiteSpace: 'nowrap' }}>\n        [動作-{index}] {action.type}{' '}\n      </span>\n      <span style={{ color: 'hsla(0,0%,100%,.7)' }}>\n        {JSON.stringify(action)}\n      </span>\n    </Paper>\n  )\n}\n\nexport const EventShower: FunctionComponent<{ event: TwfEvent, eventName: string }> = ({ event, eventName }) => {\n  const eventMetaString: string = useMemo(() => {\n    let strs = []\n    if (event.itime) {\n      strs.push(`啟動時間或${event.itime}毫秒`)\n    }\n    if (event.delay) {\n      strs.push(`延遲發動${event.delay}毫秒`)\n    }\n    if (event.rep) {\n      strs.push(`重複${event.rep}次`)\n    }\n    if (event.repInt) {\n      strs.push(`重複間隔${event.repInt}毫秒`)\n    }\n    if (event.recInt) {\n      strs.push(`重複檢查間隔${event.recInt}毫秒`)\n    }\n    const knownKeys = [\n      'tag',\n      'act',\n      'uo',\n      'cks',\n      'repInt',\n      'rep',\n      'itime',\n      'delay',\n      'recInt'\n    ]\n    Object.keys(event).forEach(k => {\n      if (!knownKeys.includes(k)) {\n        console.error(`event ${eventName} contains unknown key ${k}`)\n      }\n    })\n    return strs.join(',')\n  }, [event, eventName])\n  return (\n    <Accordion TransitionProps={{ unmountOnExit: true }}>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>事件 {eventName}</Typography>\n        {eventMetaString !== '' &&\n        <Typography component='p' variant='caption' style={{ alignSelf: 'baseline', marginLeft: '8px' }}>\n          {eventMetaString}\n        </Typography>\n        }\n        <div style={{ flex: 1 }}/>\n        <Typography component='p' variant='caption' style={{ alignSelf: 'baseline' }}>{event.tag}</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Grid direction='column' container>\n          <List>\n            {event.cks.map((check, k) => (\n              <CheckCell key={k} check={check} index={k}/>\n            ))}\n            {event.act.map((action, k) => (\n              <ActionCell key={k} action={action} index={k}/>\n            ))}\n          </List>\n          <Box>\n            <ClickShowRaw raw={event} defaultShow={0}/>\n          </Box>\n        </Grid>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Grid, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { TwfInf } from '../type'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const MissionInfoShower: FunctionComponent<{ inf: TwfInf }> = ({ inf }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>Mission Info</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Grid style={{maxWidth: '100%'}} spacing={1} container direction={'column'}>\n          <Grid item>mission name: {inf.n}</Grid>\n          <Grid item>mission description:</Grid>\n          <Grid style={{maxWidth: '100%'}}>\n            {inf.dp.split(/[\\n\\r]+/g).map((str, k) => (\n              <div key={k} style={{lineBreak: 'auto', maxWidth: '100%'}}>{str}</div>\n            ))}\n          </Grid>\n          <Grid item>mission goal: {inf.go}</Grid>\n          <Grid item>mission fail: {inf.fa}</Grid>\n          <Grid item>camps: {inf.cs.join(',')}</Grid>\n          <Grid item>minplayers: {inf.minp}</Grid>\n          <Grid item>author: {inf.sn} ({inf.su})</Grid>\n          <Grid item>ability: {inf.ab}</Grid>\n          <Grid item>ri: {inf.ri.length > 0 ? inf.ri.join(',') : <i>none</i>}</Grid>\n          <ClickShowRaw raw={inf}/>\n        </Grid>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const JsonShower: FunctionComponent<{ json: unknown, name: string }> = ({ json, name }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>{name}</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Box>\n          <ClickShowRaw raw={json} defaultShow={1}/>\n        </Box>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent, useMemo, useState } from 'react'\nimport { Twf, TwfEvent, TwfMusic, TwfRo } from '../type'\nimport { Box, FormControl, InputLabel, MenuItem, Select } from '@material-ui/core'\nimport { ClickShowRaw } from './ClickShowRaw'\nimport { EventShower } from './EventShower'\nimport { MissionInfoShower } from './MissionInfoShower'\nimport { JsonShower } from './JsonShower'\nimport { twfEventAnalysis } from '../utils/twfEventAnalysis'\n\n\nexport const TwfShower: FunctionComponent<{ twf: Twf }> = ({ twf }) => {\n  const { inf, ini, map, roles, events, musics, tags } = useMemo(() => {\n    const { inf, ini, map, ...rest } = twf\n    const roles: Array<[string, TwfRo]> = []\n    const allEvents: Array<[string, TwfEvent]> = []\n    const musics: Array<[string, TwfMusic]> = []\n    const tags = new Set<string>()\n    Object.entries(rest).forEach(([key, value]) => {\n      if (key.startsWith('ro')) {\n        roles.push([key, value as TwfRo])\n      } else if (key.startsWith('music')) {\n        musics.push([key, value as TwfMusic])\n      } else {\n        const event: TwfEvent = value as TwfEvent\n        allEvents.push([key.replace('evt_', ''), event])\n        event.tag?.split(',').forEach(t => tags.add(t))\n      }\n    })\n    const events: Record<string, TwfEvent> = Object.fromEntries(allEvents.sort((a, b) => a[1].uo - b[1].uo))\n    console.log(twfEventAnalysis(Object.values(events)))\n    return {\n      roles,\n      inf,\n      ini,\n      map,\n      events,\n      musics,\n      tags: Array.from(tags)\n    }\n  }, [twf])\n  const [filterTag, setFilterTag] = useState('')\n  return (\n    <Box onClick={e => e.stopPropagation()} style={{ height: '100%' }}>\n      <Box style={{ margin: '8px 0', display: 'flex', justifyContent: 'space-between', alignItems: 'baseline' }}>\n        <Box>\n          <ClickShowRaw raw={twf} name={twf.inf.n}/>\n        </Box>\n        <FormControl>\n          <InputLabel>\n            Tag\n          </InputLabel>\n          <Select value={filterTag} onChange={e => setFilterTag(e.target.value as string)}>\n            <MenuItem value=''> - </MenuItem>\n            {tags.map(t => (\n              <MenuItem key={t} value={t}>{t}</MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </Box>\n      <MissionInfoShower inf={inf}/>\n      <JsonShower json={map} name='map'/>\n      <JsonShower json={ini} name='spawn point'/>\n      <JsonShower json={roles} name={`${roles.length} roles`}/>\n      <JsonShower json={Object.fromEntries(musics)} name={`${musics.length} musics`}/>\n      {Object.entries(events).filter(([_, e]) => filterTag === '' || e.tag?.includes(filterTag)).map(([name, content]) => (\n        <EventShower key={name} event={content} eventName={name}/>\n      ))}\n      <div style={{height: '24px'}} />\n    </Box>\n  )\n}\n","import { TwfAct, TwfCheck, TwfEvent } from '../type'\n\nexport const twfEventAnalysis = (events: TwfEvent[]) => {\n  const checkExamples: Record<string, TwfCheck[]> = {}\n  const actionExamples: Record<string, TwfAct[]> = {}\n  events.forEach(event => {\n    try{\n      event.cks.forEach(check => {\n        if(!(check.type in checkExamples)) {\n          checkExamples[check.type] = [check]\n        }else {\n          checkExamples[check.type].push(check)\n        }\n      })\n      event.act.forEach(act => {\n        if (!(act.type in actionExamples)) {\n          actionExamples[act.type] = [act]\n        }else{\n          actionExamples[act.type].push(act)\n        }\n      })\n    }catch (e) {\n      console.log(event, e)\n    }\n  })\n  return {\n    checkExamples,\n    actionExamples\n  }\n}\n","import React, { useCallback, useState } from 'react'\nimport { Box, Container, Paper } from '@material-ui/core'\nimport { useDropzone } from 'react-dropzone'\nimport { readTwxFileAsJson } from '../utils/readFile'\nimport { Twf } from '../type'\nimport { TwfShower } from '../components/TwfShower'\n\n\nexport const ReadTwfPage = () => {\n  const [twf, setTwf] = useState<Twf | null>(null)\n  const onDrop = useCallback((acceptedFiles) => {\n    readTwxFileAsJson<Twf>(acceptedFiles[0])\n      .then(setTwf)\n  }, [])\n  const { getRootProps, getInputProps } = useDropzone({ onDrop })\n  return (\n    <Box style={{ flex: 1, overflow: 'auto', paddingBottom: '16px' }} {...(twf === null ? getRootProps() : {})} >\n      <Container style={{ height: '100%' }}>\n        <input {...getInputProps()} />\n        {\n          // isDragActive ?\n          //   <p>Drop the files here ...</p> :\n          //   <p>Drag 'n' drop some files here, or click to select files</p>\n        }\n        {twf === null && <Box style={{\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignContent: 'center',\n          height: '100%'\n        }}>\n          <Box>\n            <Paper style={{ padding: '30px' }}>\n              Drag and drop a twf file here, or click to open\n            </Paper>\n          </Box>\n        </Box>}\n        {twf !== null && <TwfShower twf={twf}/>}\n      </Container>\n    </Box>\n  )\n}\n","import React, { useState } from 'react'\nimport {\n  AppBar,\n  Box,\n  Button,\n  ButtonGroup,\n  createMuiTheme,\n  CssBaseline,\n  IconButton,\n  MuiThemeProvider,\n  Toolbar,\n  Typography,\n  useMediaQuery\n} from '@material-ui/core'\nimport { HashRouter, Route, Switch } from 'react-router-dom'\nimport { ReadTwfPage } from '../pages/ReadTwfPage'\nimport './App.css'\nimport { Brightness7 } from '@material-ui/icons'\n\nconst darkTheme = createMuiTheme({\n  palette: {\n    type: 'dark',\n  },\n});\n\nconst lightTheme = createMuiTheme({\n  palette: {\n    type: 'light',\n  },\n});\n\nfunction App () {\n  const [isDarkMode, setIsDarkMode] = useState(useMediaQuery('(prefers-color-scheme: dark)'))\n  return (\n    <MuiThemeProvider theme={isDarkMode ? darkTheme : lightTheme}>\n      <CssBaseline/>\n      <HashRouter>\n        <Box flexDirection='column' style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, display: 'flex' }}>\n          <AppBar position=\"static\">\n            <Toolbar style={{ display: 'flex', justifyContent: 'space-between' }}>\n              <Typography variant=\"h6\">\n                同人陣讀檔器\n              </Typography>\n              <ButtonGroup variant='text' color='inherit'>\n                <Button href={'//dipsy.me/twmap/'}>\n                  舊讀檔器(twf,twm,twr,var,sav)\n                </Button>\n                <Button href={'//gamelet.online/'}>\n                  嘎姆擂台\n                </Button>\n                <Button href={'//code.gamelet.com/'}>\n                  Code.Gamelet\n                </Button>\n                <Button href={'https://light-up.gamelet.online/'}>\n                  光影迷城\n                </Button>\n                <Button href={'https://poker99.gamelet.online/'}>\n                  童話99\n                </Button>\n                <Button href={'https://magile.gamelet.online/'}>\n                  魔法飛彈大作戰\n                </Button>\n                <IconButton title='Light/Dark Mode' onClick={() => setIsDarkMode(!isDarkMode)}>\n                  <Brightness7 />\n                </IconButton>\n              </ButtonGroup>\n            </Toolbar>\n          </AppBar>\n          <Switch>\n            <Route path=\"/\">\n              <ReadTwfPage/>\n            </Route>\n          </Switch>\n        </Box>\n      </HashRouter>\n    </MuiThemeProvider>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './components/App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}