{"version":3,"sources":["utils/readFile.ts","components/JsonTree.tsx","components/ClickShowRaw.tsx","utils/copyToClipboard.ts","utils/download.ts","components/EventShower.tsx","components/MissionInfoShower.tsx","components/JsonShower.tsx","components/TwfShower.tsx","utils/twfEventAnalysis.ts","pages/ReadTwfPage.tsx","components/App.tsx","reportWebVitals.ts","index.tsx"],"names":["readFile","target","file","a","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","readAsText","readAsArrayBuffer","readAsBinaryString","Error","readFileAsBinaryString","JsonTree","data","theme","scheme","author","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","ClickShowRaw","raw","defaultShow","name","useState","show","setShow","selected","color","backgroundColor","ButtonGroup","Button","onClick","style","undefined","marginLeft","str","el","document","createElement","value","body","appendChild","select","execCommand","removeChild","copyToClipboard","JSON","stringify","text","filename","element","setAttribute","encodeURIComponent","display","click","download","CheckCell","check","className","type","ActionCell","action","EventShower","event","eventName","eventMetaString","useMemo","strs","itime","push","delay","rep","repInt","recInt","knownKeys","Object","keys","forEach","k","includes","console","error","join","Accordion","TransitionProps","unmountOnExit","AccordionSummary","expandIcon","aria-controls","id","Typography","component","variant","alignSelf","flex","tag","AccordionDetails","Grid","direction","List","cks","map","act","Box","MissionInfoShower","inf","maxWidth","spacing","container","item","n","dp","split","lineBreak","go","fa","cs","minp","sn","su","ab","ri","length","JsonShower","json","TwfShower","twf","ini","rest","roles","allEvents","musics","tags","Set","entries","key","startsWith","replace","t","add","events","fromEntries","sort","b","uo","log","checkExamples","actionExamples","e","twfEventAnalysis","values","Array","from","filterTag","setFilterTag","stopPropagation","height","margin","justifyContent","alignItems","FormControl","InputLabel","Select","onChange","MenuItem","filter","content","ReadTwfPage","setTwf","onDrop","useCallback","acceptedFiles","then","bs","pako","inflate","buf","TextDecoder","decode","s1","start","indexOf","end","lastIndexOf","slice","parse","useDropzone","getRootProps","getInputProps","overflow","paddingBottom","Container","flexDirection","alignContent","Paper","padding","App","position","top","left","right","bottom","AppBar","Toolbar","href","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"qVAEMA,EAAW,SAACC,GAAD,8CAAoB,WAAOC,GAAP,SAAAC,EAAA,+EAAwE,IAAIC,SAAQ,SAACC,GACxH,IAAMC,EAAS,IAAIC,WAOnB,OANAD,EAAOE,iBACL,QACA,SAACF,GAAD,aACED,EAAO,OAACC,QAAD,IAACA,GAAD,UAACA,EAAQL,cAAT,aAAC,EAAgBQ,WAGpBR,GACN,IAAK,gBACL,IAAK,UACL,IAAK,SACHK,EAAOI,cAAcR,GACrB,MACF,IAAK,aACL,IAAK,OACHI,EAAOK,WAAWT,GAClB,MACF,IAAK,SACL,IAAK,cACL,IAAK,oBACHI,EAAOM,kBAAkBV,GACzB,MACF,IAAK,KACL,IAAK,eACL,IAAK,qBACHI,EAAOO,mBAAmBX,GAC1B,MACF,QACE,MAAM,IAAIY,MAAJ,8CAAiDb,SA7BxB,2CAApB,uDAoCXc,GAHqDf,EAAS,iBACZA,EAAS,cACGA,EAAS,qBACbA,EAAS,uB,6DCnC5DgB,EAA+C,SAAC,GAAY,IAAXC,EAAU,EAAVA,KAC5D,OACE,cAAC,IAAD,CAAUA,KAAMA,EAAMC,MAAO,CACvBC,OAAQ,SACRC,OAAQ,0CACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,UACRC,OAAQ,cCjBLC,EAAyF,SAAC,GAIO,IAHLC,EAGI,EAHJA,IACAC,EAEI,EAFJA,YACAC,EACI,EADJA,KACI,EACnFC,mBAAQ,OAACF,QAAD,IAACA,IAAe,GAD2D,mBACpGG,EADoG,KAC9FC,EAD8F,KAErGC,EAAW,CACfC,MAAM,sBACNC,gBAAgB,uBAElB,OACE,qCACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQC,QAAS,kBAAMN,EAAQ,IAAIO,MAAgB,IAATR,EAAaE,OAAWO,EAAlE,uBACA,cAACH,EAAA,EAAD,CAAQC,QAAS,kBAAMN,EAAQ,IAAIO,MAAgB,IAATR,EAAaE,OAAWO,EAAlE,uBACA,cAACH,EAAA,EAAD,CAAQC,QAAS,kBAAMN,EAAQ,IAAIO,MAAgB,IAATR,EAAaE,OAAWO,EAAlE,yBAEF,eAACJ,EAAA,EAAD,CAAaG,MAAO,CAACE,WAAY,OAAjC,UACE,cAACJ,EAAA,EAAD,CAAQC,QAAS,kBCxBM,SAACI,GAC9B,IAAMC,EAAKC,SAASC,cAAc,YAClCF,EAAGG,MAAQJ,EACXE,SAASG,KAAKC,YAAYL,GAC1BA,EAAGM,SACHL,SAASM,YAAY,QACrBN,SAASG,KAAKI,YAAYR,GDkBGS,CAAgBC,KAAKC,UAAU3B,EAAK,KAAM,KAAjE,uBACA,cAACU,EAAA,EAAD,CACEC,QAAS,kBE1BK,SAACiB,EAAcC,GACrC,IAAMC,EAAUb,SAASC,cAAc,KACvCY,EAAQC,aAAa,OAAQ,iCAAmCC,mBAAmBJ,IACnFE,EAAQC,aAAa,WAAYF,GAEjCC,EAAQlB,MAAMqB,QAAU,OACxBhB,SAASG,KAAKC,YAAYS,GAE1BA,EAAQI,QAERjB,SAASG,KAAKI,YAAYM,GFgBHK,CAAST,KAAKC,UAAU3B,EAAK,KAAM,QAAaa,IAATX,EAAA,UAAwBA,EAAxB,SAAsC,kBAD9F,8BAKQ,IAATE,GAAc,cAAC,EAAD,CAAUzB,KAAMqB,IACrB,IAATI,GACC,8BACGsB,KAAKC,UAAU3B,EAAK,KAAM,S,8DG3B/BoC,EAAoD,SAAC,GAAe,IAAbC,EAAY,EAAZA,MAC3D,OACE,sBACEC,UAAW,OACX1B,MAAO,CACLJ,gBAAiB,QAHrB,4BAKQ6B,EAAME,KAAM,IAClB,sBAAM3B,MAAO,CAAEL,MAAO,sBAAtB,SACGmB,KAAKC,UAAUU,SAMlBG,EAAoD,SAAC,GAAgB,IAAdC,EAAa,EAAbA,OAC3D,OACE,sBACEH,UAAW,OACX1B,MAAO,CACLJ,gBAAiB,QAHrB,4BAKQiC,EAAOF,KAAM,IACnB,sBAAM3B,MAAO,CAAEL,MAAO,sBAAtB,SACGmB,KAAKC,UAAUc,SAMXC,EAAyE,SAAC,GAA0B,IAAxBC,EAAuB,EAAvBA,MAAOC,EAAgB,EAAhBA,UACxFC,EAA0BC,mBAAQ,WACtC,IAAIC,EAAO,GACPJ,EAAMK,OACRD,EAAKE,KAAL,wCAAkBN,EAAMK,MAAxB,iBAEEL,EAAMO,OACRH,EAAKE,KAAL,kCAAiBN,EAAMO,MAAvB,iBAEEP,EAAMQ,KACRJ,EAAKE,KAAL,sBAAeN,EAAMQ,IAArB,WAEER,EAAMS,QACRL,EAAKE,KAAL,kCAAiBN,EAAMS,OAAvB,iBAEET,EAAMU,QACRN,EAAKE,KAAL,8CAAmBN,EAAMU,OAAzB,iBAEF,IAAMC,EAAY,CAChB,MACA,MACA,KACA,MACA,SACA,MACA,QACA,QACA,UAOF,OALAC,OAAOC,KAAKb,GAAOc,SAAQ,SAAAC,GACpBJ,EAAUK,SAASD,IACtBE,QAAQC,MAAR,gBAAuBjB,EAAvB,iCAAyDc,OAGtDX,EAAKe,KAAK,OAChB,CAACnB,EAAOC,IACX,OACE,eAACmB,EAAA,EAAD,CAAWC,gBAAiB,CAAEC,eAAe,GAA7C,UACE,eAACC,EAAA,EAAD,CACEC,WAAY,cAAC,IAAD,IACZC,gBAAc,kBACdC,GAAG,iBAHL,UAKE,eAACC,EAAA,EAAD,2BAAgB1B,KACK,KAApBC,GACD,cAACyB,EAAA,EAAD,CAAYC,UAAU,IAAIC,QAAQ,UAAU5D,MAAO,CAAE6D,UAAW,WAAY3D,WAAY,OAAxF,SACG+B,IAGH,qBAAKjC,MAAO,CAAE8D,KAAM,KACpB,cAACJ,EAAA,EAAD,CAAYC,UAAU,IAAIC,QAAQ,UAAU5D,MAAO,CAAE6D,UAAW,YAAhE,SAA+E9B,EAAMgC,SAEvF,cAACC,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,CAAMC,UAAU,SAAhB,UACE,eAACC,EAAA,EAAD,WACGpC,EAAMqC,IAAIC,KAAI,SAAC5C,EAAOqB,GAAR,OACb,cAAC,EAAD,CAAmBrB,MAAOA,GAAVqB,MAEjBf,EAAMuC,IAAID,KAAI,SAACxC,EAAQiB,GAAT,OACb,cAAC,EAAD,CAAoBjB,OAAQA,GAAXiB,SAGrB,cAACyB,EAAA,EAAD,UACE,cAAC,EAAD,CAAcnF,IAAK2C,EAAO1C,YAAa,eC7FtCmF,EAAwD,SAAC,GAAa,IAAXC,EAAU,EAAVA,IACtE,OACE,eAACtB,EAAA,EAAD,WACE,cAACG,EAAA,EAAD,CACEC,WAAY,cAAC,IAAD,IACZC,gBAAc,kBACdC,GAAG,iBAHL,SAKE,cAACC,EAAA,EAAD,6BAEF,cAACM,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,CAAMjE,MAAO,CAAC0E,SAAU,QAASC,QAAS,EAAGC,WAAS,EAACV,UAAW,SAAlE,UACE,eAACD,EAAA,EAAD,CAAMY,MAAI,EAAV,2BAA0BJ,EAAIK,KAC9B,cAACb,EAAA,EAAD,CAAMY,MAAI,EAAV,kCACA,cAACZ,EAAA,EAAD,CAAMjE,MAAO,CAAC0E,SAAU,QAAxB,SACGD,EAAIM,GAAGC,MAAM,YAAYX,KAAI,SAAClE,EAAK2C,GAAN,OAC5B,qBAAa9C,MAAO,CAACiF,UAAW,OAAQP,SAAU,QAAlD,SAA4DvE,GAAlD2C,QAGd,eAACmB,EAAA,EAAD,CAAMY,MAAI,EAAV,2BAA0BJ,EAAIS,MAC9B,eAACjB,EAAA,EAAD,CAAMY,MAAI,EAAV,2BAA0BJ,EAAIU,MAC9B,eAAClB,EAAA,EAAD,CAAMY,MAAI,EAAV,oBAAmBJ,EAAIW,GAAGlC,KAAK,QAC/B,eAACe,EAAA,EAAD,CAAMY,MAAI,EAAV,yBAAwBJ,EAAIY,QAC5B,eAACpB,EAAA,EAAD,CAAMY,MAAI,EAAV,qBAAoBJ,EAAIa,GAAxB,KAA8Bb,EAAIc,GAAlC,OACA,eAACtB,EAAA,EAAD,CAAMY,MAAI,EAAV,sBAAqBJ,EAAIe,MACzB,eAACvB,EAAA,EAAD,CAAMY,MAAI,EAAV,iBAAgBJ,EAAIgB,GAAGC,OAAS,EAAIjB,EAAIgB,GAAGvC,KAAK,KAAO,wCACvD,cAAC,EAAD,CAAc9D,IAAKqF,aC3BhBkB,EAAiE,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,KAAMtG,EAAW,EAAXA,KACrF,OACE,eAAC6D,EAAA,EAAD,WACE,cAACG,EAAA,EAAD,CACEC,WAAY,cAAC,IAAD,IACZC,gBAAc,kBACdC,GAAG,iBAHL,SAKE,cAACC,EAAA,EAAD,UAAapE,MAEf,cAAC0E,EAAA,EAAD,UACE,cAACO,EAAA,EAAD,UACE,cAAC,EAAD,CAAcnF,IAAKwG,EAAMvG,YAAa,YCPnCwG,EAA6C,SAAC,GAAa,IAAXC,EAAU,EAAVA,IAAU,EACd5D,mBAAQ,WAAO,IAC5DuC,EAA2BqB,EAA3BrB,IAAKsB,EAAsBD,EAAtBC,IAAK1B,EAAiByB,EAAjBzB,IAAQ2B,EADyC,YAChCF,EADgC,qBAE7DG,EAAgC,GAChCC,EAAuC,GACvCC,EAAoC,GACpCC,EAAO,IAAIC,IACjB1D,OAAO2D,QAAQN,GAAMnD,SAAQ,YAAmB,IAAD,mBAAhB0D,EAAgB,KAAXhG,EAAW,KAC7C,GAAIgG,EAAIC,WAAW,MACjBP,EAAM5D,KAAK,CAACkE,EAAKhG,SACZ,GAAIgG,EAAIC,WAAW,SACxBL,EAAO9D,KAAK,CAACkE,EAAKhG,QACb,CAAC,IAAD,EACCwB,EAAkBxB,EACxB2F,EAAU7D,KAAK,CAACkE,EAAIE,QAAQ,OAAQ,IAAK1E,IACzC,UAAAA,EAAMgC,WAAN,SAAWiB,MAAM,KAAKnC,SAAQ,SAAA6D,GAAC,OAAIN,EAAKO,IAAID,UAGhD,IAAME,EAAmCjE,OAAOkE,YAAYX,EAAUY,MAAK,SAAC7J,EAAG8J,GAAJ,OAAU9J,EAAE,GAAG+J,GAAKD,EAAE,GAAGC,OAEpG,OADAhE,QAAQiE,IC3BoB,SAACL,GAC/B,IAAMM,EAA4C,GAC5CC,EAA2C,GAqBjD,OApBAP,EAAO/D,SAAQ,SAAAd,GACb,IACEA,EAAMqC,IAAIvB,SAAQ,SAAApB,GACXA,EAAME,QAAQuF,EAGjBA,EAAczF,EAAME,MAAMU,KAAKZ,GAF/ByF,EAAczF,EAAME,MAAQ,CAACF,MAKjCM,EAAMuC,IAAIzB,SAAQ,SAAAyB,GACVA,EAAI3C,QAAQwF,EAGhBA,EAAe7C,EAAI3C,MAAMU,KAAKiC,GAF9B6C,EAAe7C,EAAI3C,MAAQ,CAAC2C,MAKjC,MAAO8C,GACNpE,QAAQiE,IAAIlF,EAAOqF,OAGhB,CACLF,gBACAC,kBDEYE,CAAiB1E,OAAO2E,OAAOV,KACpC,CACLX,QACAxB,MACAsB,MACA1B,MACAuC,SACAT,SACAC,KAAMmB,MAAMC,KAAKpB,MAElB,CAACN,IA5BIrB,EAD6D,EAC7DA,IAAKsB,EADwD,EACxDA,IAAK1B,EADmD,EACnDA,IAAK4B,EAD8C,EAC9CA,MAAOW,EADuC,EACvCA,OAAQT,EAD+B,EAC/BA,OAAQC,EADuB,EACvBA,KADuB,EA8BnC7G,mBAAS,IA9B0B,mBA8B9DkI,EA9B8D,KA8BnDC,EA9BmD,KA+BrE,OACE,eAACnD,EAAA,EAAD,CAAKxE,QAAS,SAAAqH,GAAC,OAAIA,EAAEO,mBAAmB3H,MAAO,CAAE4H,OAAQ,QAAzD,UACE,eAACrD,EAAA,EAAD,CAAKvE,MAAO,CAAE6H,OAAQ,QAASxG,QAAS,OAAQyG,eAAgB,gBAAiBC,WAAY,YAA7F,UACE,cAACxD,EAAA,EAAD,UACE,cAAC,EAAD,CAAcnF,IAAK0G,EAAKxG,KAAMwG,EAAIrB,IAAIK,MAExC,eAACkD,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,kBAGA,eAACC,EAAA,EAAD,CAAQ3H,MAAOkH,EAAWU,SAAU,SAAAf,GAAC,OAAIM,EAAaN,EAAErK,OAAOwD,QAA/D,UACE,cAAC6H,EAAA,EAAD,CAAU7H,MAAM,GAAhB,iBACC6F,EAAK/B,KAAI,SAAAqC,GAAC,OACT,cAAC0B,EAAA,EAAD,CAAkB7H,MAAOmG,EAAzB,SAA6BA,GAAdA,eAKvB,cAAC,EAAD,CAAmBjC,IAAKA,IACxB,cAAC,EAAD,CAAYmB,KAAMvB,EAAK/E,KAAK,QAC5B,cAAC,EAAD,CAAYsG,KAAMG,EAAKzG,KAAK,gBAC5B,cAAC,EAAD,CAAYsG,KAAMK,EAAO3G,KAAI,UAAK2G,EAAMP,OAAX,YAC7B,cAAC,EAAD,CAAYE,KAAMjD,OAAOkE,YAAYV,GAAS7G,KAAI,UAAK6G,EAAOT,OAAZ,aACjD/C,OAAO2D,QAAQM,GAAQyB,QAAO,qCAAKjB,GAAL,iBAA0B,KAAdK,IAAA,UAAoBL,EAAErD,WAAtB,aAAoB,EAAOhB,SAAS0E,OAAYpD,KAAI,mCAAE/E,EAAF,KAAQgJ,EAAR,YAC7F,cAAC,EAAD,CAAwBvG,MAAOuG,EAAStG,UAAW1C,GAAjCA,MAEpB,qBAAKU,MAAO,CAAC4H,OAAQ,cE3DdW,EAAc,WAAO,IAAD,EACThJ,mBAAqB,MADZ,mBACxBuG,EADwB,KACnB0C,EADmB,KAEzBC,EAASC,uBAAY,SAACC,GV6B2B,IAAC3L,KU5B/B2L,EAAc,GV6BvC9K,EAAuBb,GACpB4L,MAAK,SAAAC,GAAE,OAAIC,IAAKC,QAAQF,MACxBD,MAAK,SAAAI,GAAG,OAAI,IAAIC,YAAY,SAASC,OAAOF,MAC5CJ,MAAM,SAAAO,GACL,IAAMC,EAAQD,EAAGE,QAAQ,KACnBC,EAAMH,EAAGI,YAAY,KAE3B,OADWJ,EAAGK,MAAMJ,EAAOE,EAAM,GAAG7C,QAAQ,gBAAiB,cAI9DmC,KAAK9H,KAAK2I,QUtCRb,KAAKJ,KACP,IAL4B,EAMSkB,YAAY,CAAEjB,WAA9CkB,EANuB,EAMvBA,aAAcC,EANS,EAMTA,cACtB,OACE,cAACrF,EAAA,EAAD,yBAAKvE,MAAO,CAAE8D,KAAM,EAAG+F,SAAU,OAAQC,cAAe,SAAuB,OAARhE,EAAe6D,IAAiB,IAAvG,aACE,eAACI,EAAA,EAAD,CAAW/J,MAAO,CAAE4H,OAAQ,QAA5B,UACE,qCAAWgC,MAMF,OAAR9D,GAAgB,cAACvB,EAAA,EAAD,CAAKvE,MAAO,CAC3BqB,QAAS,OACT2I,cAAe,SACflC,eAAgB,SAChBmC,aAAc,SACdrC,OAAQ,QALO,SAOf,cAACrD,EAAA,EAAD,UACE,cAAC2F,EAAA,EAAD,CAAOlK,MAAO,CAAEmK,QAAS,QAAzB,iEAKK,OAARrE,GAAgB,cAAC,EAAD,CAAWA,IAAKA,W,OCU1BsE,MAzCf,WACE,OACE,cAAC,IAAD,UACE,eAAC7F,EAAA,EAAD,CAAKyF,cAAc,SAAShK,MAAO,CAAEqK,SAAU,QAASC,IAAK,EAAGC,KAAM,EAAGC,MAAO,EAAGC,OAAQ,EAAGpJ,QAAS,QAAvG,UACE,cAACqJ,EAAA,EAAD,CAAQL,SAAS,SAAjB,SACE,eAACM,EAAA,EAAD,CAAS3K,MAAO,CAAEqB,QAAS,OAAQyG,eAAgB,iBAAnD,UACE,cAACpE,EAAA,EAAD,CAAYE,QAAQ,KAApB,kDAGA,eAAC/D,EAAA,EAAD,CAAa+D,QAAQ,OAAOjE,MAAM,UAAlC,UACE,cAACG,EAAA,EAAD,CAAQ8K,KAAM,oBAAd,2DAGA,cAAC9K,EAAA,EAAD,CAAQ8K,KAAM,oBAAd,sCAGA,cAAC9K,EAAA,EAAD,CAAQ8K,KAAM,sBAAd,0BAGA,cAAC9K,EAAA,EAAD,CAAQ8K,KAAM,mCAAd,sCAGA,cAAC9K,EAAA,EAAD,CAAQ8K,KAAM,kCAAd,4BAGA,cAAC9K,EAAA,EAAD,CAAQ8K,KAAM,iCAAd,gEAMN,cAAC,IAAD,UACE,cAAC,IAAD,CAAOC,KAAK,IAAZ,SACE,cAAC,EAAD,cCzBGC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,8BAAqBpC,MAAK,YAAkD,IAA/CqC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCHdO,IAASC,OACP,cAAC,EAAD,IACAlL,SAASmL,eAAe,SAM1BV,M","file":"static/js/main.1277aa53.chunk.js","sourcesContent":["import pako from 'pako'\n\nconst readFile = (target: string) => async (file: Blob): Promise<string | ArrayBuffer | null | undefined> => new Promise((resolve) => {\n  const reader = new FileReader()\n  reader.addEventListener(\n    'load',\n    (reader) => (\n      resolve(reader?.target?.result)\n    )\n  )\n  switch (target) {\n    case 'readAsDataURL':\n    case 'dataURL':\n    case 'base64':\n      reader.readAsDataURL(file)\n      break\n    case 'readAsText':\n    case 'text':\n      reader.readAsText(file)\n      break\n    case 'buffer':\n    case 'arrayBuffer':\n    case 'readAsArrayBuffer':\n      reader.readAsArrayBuffer(file)\n      break\n    case 'bs':\n    case 'binaryString':\n    case 'readAsBinaryString':\n      reader.readAsBinaryString(file)\n      break\n    default:\n      throw new Error(`readFile received an unknown option ${target}`)\n  }\n})\n\nconst readFileAsDataURL: (file: File) => Promise<string> = readFile('readAsDataURL') as (file: File) => Promise<string>\nconst readFileAsText: (file: File) => Promise<string> = readFile('readAsText') as (file: File) => Promise<string>\nconst readFileAsArrayBuffer: (file: File) => Promise<ArrayBuffer> = readFile('readAsArrayBuffer') as (file: File) => Promise<ArrayBuffer>\nconst readFileAsBinaryString: (file: File) => Promise<string> = readFile('readAsBinaryString') as (file: File) => Promise<string>\nconst readTwxFileAsJson: <T>(file: File) => Promise<T> = (file: File) => (\n  readFileAsBinaryString(file)\n    .then(bs => pako.inflate(bs))\n    .then(buf => new TextDecoder('utf-8').decode(buf))\n    .then((s1 => {\n      const start = s1.indexOf('{')\n      const end = s1.lastIndexOf('}')\n      const s2 = s1.slice(start, end + 1).replace(/([,{])(\\d+):/g, '$1\"$2\":')\n      return s2\n      // return JSON.parse(s2)\n    }))\n    .then(JSON.parse)\n)\nexport default readFile\n\nexport {\n  readFileAsDataURL,\n  readFileAsText,\n  readFileAsArrayBuffer,\n  readFileAsBinaryString,\n  readTwxFileAsJson\n}\n","import React, { FunctionComponent } from 'react'\nimport JSONTree from 'react-json-tree'\n\nexport const JsonTree: FunctionComponent<{data: unknown}> = ({data}) => {\n  return (\n    <JSONTree data={data} theme={{\n          scheme: 'bright',\n          author: 'chris kempson (http://chriskempson.com)',\n          base00: '#000000',\n          base01: '#303030',\n          base02: '#505050',\n          base03: '#b0b0b0',\n          base04: '#d0d0d0',\n          base05: '#e0e0e0',\n          base06: '#f5f5f5',\n          base07: '#ffffff',\n          base08: '#fb0120',\n          base09: '#fc6d24',\n          base0A: '#fda331',\n          base0B: '#a1c659',\n          base0C: '#76c7b7',\n          base0D: '#6fb3d2',\n          base0E: '#d381c3',\n          base0F: '#be643c'\n    }}/>\n  )\n}\n","import { FunctionComponent, useState } from 'react'\nimport { Button, ButtonGroup } from '@material-ui/core'\nimport { JsonTree } from './JsonTree'\nimport { copyToClipboard } from '../utils/copyToClipboard'\nimport { download } from '../utils/download'\n\nexport const ClickShowRaw: FunctionComponent<{ raw: unknown, defaultShow?: number, name?: string }> = ({\n                                                                                                         raw,\n                                                                                                         defaultShow,\n                                                                                                         name\n                                                                                                       }) => {\n  const [show, setShow] = useState(defaultShow ?? 0)\n  const selected = {\n    color: `rgba(0, 0, 0, 0.54)`,\n    backgroundColor: `rgba(0, 0, 0, 0.12)`\n  }\n  return (\n    <>\n      <ButtonGroup>\n        <Button onClick={() => setShow(0)} style={show === 0 ? selected : undefined}>Hide JSON</Button>\n        <Button onClick={() => setShow(1)} style={show === 1 ? selected : undefined}>Tree JSON</Button>\n        <Button onClick={() => setShow(2)} style={show === 2 ? selected : undefined}>Raw JSON</Button>\n      </ButtonGroup>\n      <ButtonGroup style={{marginLeft: '8px'}}>\n        <Button onClick={() => copyToClipboard(JSON.stringify(raw, null, 2))}>Copy JSON</Button>\n        <Button\n          onClick={() => download(JSON.stringify(raw, null, 2), name !== undefined ? `${name}.json` : 'download.json')}>\n          Download JSON\n        </Button>\n      </ButtonGroup>\n      {show === 1 && <JsonTree data={raw}/>}\n      {show === 2 && (\n        <pre>\n          {JSON.stringify(raw, null, 2)}\n        </pre>\n      )}\n    </>\n  )\n\n}\n","export const copyToClipboard = (str: string): void => {\n  const el = document.createElement('textarea')\n  el.value = str\n  document.body.appendChild(el)\n  el.select()\n  document.execCommand('copy')\n  document.body.removeChild(el)\n}\n","export const download = (text: string, filename: string) => {\n  const element = document.createElement('a')\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text))\n  element.setAttribute('download', filename)\n\n  element.style.display = 'none'\n  document.body.appendChild(element)\n\n  element.click()\n\n  document.body.removeChild(element)\n}\n","import React, { FunctionComponent, useMemo } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Grid, List, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { TwfAct, TwfCheck, TwfEvent } from '../type'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nconst CheckCell: FunctionComponent<{ check: TwfCheck }> = ({ check }) => {\n  return (\n    <div\n      className={'cell'}\n      style={{\n        backgroundColor: '#070',\n      }}>\n      [檢查] {check.type}{' '}\n      <span style={{ color: 'hsla(0,0%,100%,.7)' }}>\n        {JSON.stringify(check)}\n      </span>\n    </div>\n  )\n}\n\nconst ActionCell: FunctionComponent<{ action: TwfAct }> = ({ action }) => {\n  return (\n    <div\n      className={'cell'}\n      style={{\n        backgroundColor: '#06b',\n      }}>\n      [動作] {action.type}{' '}\n      <span style={{ color: 'hsla(0,0%,100%,.7)' }}>\n        {JSON.stringify(action)}\n      </span>\n    </div>\n  )\n}\n\nexport const EventShower: FunctionComponent<{ event: TwfEvent, eventName: string }> = ({ event, eventName }) => {\n  const eventMetaString: string = useMemo(() => {\n    let strs = []\n    if (event.itime) {\n      strs.push(`啟動時間或${event.itime}毫秒`)\n    }\n    if (event.delay) {\n      strs.push(`延遲發動${event.delay}毫秒`)\n    }\n    if (event.rep) {\n      strs.push(`重複${event.rep}次`)\n    }\n    if (event.repInt) {\n      strs.push(`重複間隔${event.repInt}毫秒`)\n    }\n    if (event.recInt) {\n      strs.push(`重複檢查間隔${event.recInt}毫秒`)\n    }\n    const knownKeys = [\n      'tag',\n      'act',\n      'uo',\n      'cks',\n      'repInt',\n      'rep',\n      'itime',\n      'delay',\n      'recInt'\n    ]\n    Object.keys(event).forEach(k => {\n      if (!knownKeys.includes(k)) {\n        console.error(`event ${eventName} contains unknown key ${k}`)\n      }\n    })\n    return strs.join(',')\n  }, [event, eventName])\n  return (\n    <Accordion TransitionProps={{ unmountOnExit: true }}>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>事件 {eventName}</Typography>\n        {eventMetaString !== '' &&\n        <Typography component='p' variant='caption' style={{ alignSelf: 'baseline', marginLeft: '8px' }}>\n          {eventMetaString}\n        </Typography>\n        }\n        <div style={{ flex: 1 }}/>\n        <Typography component='p' variant='caption' style={{ alignSelf: 'baseline' }}>{event.tag}</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Grid direction='column'>\n          <List>\n            {event.cks.map((check, k) => (\n              <CheckCell key={k} check={check}/>\n            ))}\n            {event.act.map((action, k) => (\n              <ActionCell key={k} action={action}/>\n            ))}\n          </List>\n          <Box>\n            <ClickShowRaw raw={event} defaultShow={1}/>\n          </Box>\n        </Grid>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Grid, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { TwfInf } from '../type'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const MissionInfoShower: FunctionComponent<{ inf: TwfInf }> = ({ inf }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>Mission Info</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Grid style={{maxWidth: '100%'}} spacing={1} container direction={'column'}>\n          <Grid item>mission name: {inf.n}</Grid>\n          <Grid item>mission description:</Grid>\n          <Grid style={{maxWidth: '100%'}}>\n            {inf.dp.split(/[\\n\\r]+/g).map((str, k) => (\n              <div key={k} style={{lineBreak: 'auto', maxWidth: '100%'}}>{str}</div>\n            ))}\n          </Grid>\n          <Grid item>mission goal: {inf.go}</Grid>\n          <Grid item>mission fail: {inf.fa}</Grid>\n          <Grid item>camps: {inf.cs.join(',')}</Grid>\n          <Grid item>minplayers: {inf.minp}</Grid>\n          <Grid item>author: {inf.sn} ({inf.su})</Grid>\n          <Grid item>ability: {inf.ab}</Grid>\n          <Grid item>ri: {inf.ri.length > 0 ? inf.ri.join(',') : <i>none</i>}</Grid>\n          <ClickShowRaw raw={inf}/>\n        </Grid>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const JsonShower: FunctionComponent<{ json: unknown, name: string }> = ({ json, name }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>{name}</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Box>\n          <ClickShowRaw raw={json} defaultShow={1}/>\n        </Box>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent, useMemo, useState } from 'react'\nimport { Twf, TwfEvent, TwfMusic, TwfRo } from '../type'\nimport { Box, FormControl, InputLabel, MenuItem, Select } from '@material-ui/core'\nimport { ClickShowRaw } from './ClickShowRaw'\nimport { EventShower } from './EventShower'\nimport { MissionInfoShower } from './MissionInfoShower'\nimport { JsonShower } from './JsonShower'\nimport { twfEventAnalysis } from '../utils/twfEventAnalysis'\n\n\nexport const TwfShower: FunctionComponent<{ twf: Twf }> = ({ twf }) => {\n  const { inf, ini, map, roles, events, musics, tags } = useMemo(() => {\n    const { inf, ini, map, ...rest } = twf\n    const roles: Array<[string, TwfRo]> = []\n    const allEvents: Array<[string, TwfEvent]> = []\n    const musics: Array<[string, TwfMusic]> = []\n    const tags = new Set<string>()\n    Object.entries(rest).forEach(([key, value]) => {\n      if (key.startsWith('ro')) {\n        roles.push([key, value as TwfRo])\n      } else if (key.startsWith('music')) {\n        musics.push([key, value as TwfMusic])\n      } else {\n        const event: TwfEvent = value as TwfEvent\n        allEvents.push([key.replace('evt_', ''), event])\n        event.tag?.split(',').forEach(t => tags.add(t))\n      }\n    })\n    const events: Record<string, TwfEvent> = Object.fromEntries(allEvents.sort((a, b) => a[1].uo - b[1].uo))\n    console.log(twfEventAnalysis(Object.values(events)))\n    return {\n      roles,\n      inf,\n      ini,\n      map,\n      events,\n      musics,\n      tags: Array.from(tags)\n    }\n  }, [twf])\n  const [filterTag, setFilterTag] = useState('')\n  return (\n    <Box onClick={e => e.stopPropagation()} style={{ height: '100%' }}>\n      <Box style={{ margin: '8px 0', display: 'flex', justifyContent: 'space-between', alignItems: 'baseline' }}>\n        <Box>\n          <ClickShowRaw raw={twf} name={twf.inf.n}/>\n        </Box>\n        <FormControl>\n          <InputLabel>\n            Tag\n          </InputLabel>\n          <Select value={filterTag} onChange={e => setFilterTag(e.target.value as string)}>\n            <MenuItem value=''> - </MenuItem>\n            {tags.map(t => (\n              <MenuItem key={t} value={t}>{t}</MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </Box>\n      <MissionInfoShower inf={inf}/>\n      <JsonShower json={map} name='map'/>\n      <JsonShower json={ini} name='spawn point'/>\n      <JsonShower json={roles} name={`${roles.length} roles`}/>\n      <JsonShower json={Object.fromEntries(musics)} name={`${musics.length} musics`}/>\n      {Object.entries(events).filter(([_, e]) => filterTag === '' || e.tag?.includes(filterTag)).map(([name, content]) => (\n        <EventShower key={name} event={content} eventName={name}/>\n      ))}\n      <div style={{height: '24px'}} />\n    </Box>\n  )\n}\n","import { TwfAct, TwfCheck, TwfEvent } from '../type'\n\nexport const twfEventAnalysis = (events: TwfEvent[]) => {\n  const checkExamples: Record<string, TwfCheck[]> = {}\n  const actionExamples: Record<string, TwfAct[]> = {}\n  events.forEach(event => {\n    try{\n      event.cks.forEach(check => {\n        if(!(check.type in checkExamples)) {\n          checkExamples[check.type] = [check]\n        }else {\n          checkExamples[check.type].push(check)\n        }\n      })\n      event.act.forEach(act => {\n        if (!(act.type in actionExamples)) {\n          actionExamples[act.type] = [act]\n        }else{\n          actionExamples[act.type].push(act)\n        }\n      })\n    }catch (e) {\n      console.log(event, e)\n    }\n  })\n  return {\n    checkExamples,\n    actionExamples\n  }\n}\n","import React, { useCallback, useState } from 'react'\nimport { Box, Container, Paper } from '@material-ui/core'\nimport { useDropzone } from 'react-dropzone'\nimport { readTwxFileAsJson } from '../utils/readFile'\nimport { Twf } from '../type'\nimport { TwfShower } from '../components/TwfShower'\n\n\nexport const ReadTwfPage = () => {\n  const [twf, setTwf] = useState<Twf | null>(null)\n  const onDrop = useCallback((acceptedFiles) => {\n    readTwxFileAsJson<Twf>(acceptedFiles[0])\n      .then(setTwf)\n  }, [])\n  const { getRootProps, getInputProps } = useDropzone({ onDrop })\n  return (\n    <Box style={{ flex: 1, overflow: 'auto', paddingBottom: '16px' }} {...(twf === null ? getRootProps() : {})} >\n      <Container style={{ height: '100%' }}>\n        <input {...getInputProps()} />\n        {\n          // isDragActive ?\n          //   <p>Drop the files here ...</p> :\n          //   <p>Drag 'n' drop some files here, or click to select files</p>\n        }\n        {twf === null && <Box style={{\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignContent: 'center',\n          height: '100%'\n        }}>\n          <Box>\n            <Paper style={{ padding: '30px' }}>\n              Drag and drop a twf file here, or click to open\n            </Paper>\n          </Box>\n        </Box>}\n        {twf !== null && <TwfShower twf={twf}/>}\n      </Container>\n    </Box>\n  )\n}\n","import React from 'react'\nimport { AppBar, Box, Button, ButtonGroup, Toolbar, Typography } from '@material-ui/core'\nimport { HashRouter, Route, Switch } from 'react-router-dom'\nimport { ReadTwfPage } from '../pages/ReadTwfPage'\nimport './App.css'\n\nfunction App () {\n  return (\n    <HashRouter>\n      <Box flexDirection='column' style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, display: 'flex' }}>\n        <AppBar position=\"static\">\n          <Toolbar style={{ display: 'flex', justifyContent: 'space-between' }}>\n            <Typography variant=\"h6\">\n              同人陣讀檔器\n            </Typography>\n            <ButtonGroup variant='text' color='inherit'>\n              <Button href={'//dipsy.me/twmap/'}>\n                舊讀檔器(twf,twm,twr,var,sav)\n              </Button>\n              <Button href={'//gamelet.online/'}>\n                嘎姆擂台\n              </Button>\n              <Button href={'//code.gamelet.com/'}>\n                Code.Gamelet\n              </Button>\n              <Button href={'https://light-up.gamelet.online/'}>\n                光影迷城\n              </Button>\n              <Button href={'https://poker99.gamelet.online/'}>\n                童話99\n              </Button>\n              <Button href={'https://magile.gamelet.online/'}>\n                魔法飛彈大作戰\n              </Button>\n            </ButtonGroup>\n          </Toolbar>\n        </AppBar>\n        <Switch>\n          <Route path=\"/\">\n            <ReadTwfPage/>\n          </Route>\n        </Switch>\n      </Box>\n    </HashRouter>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './components/App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}