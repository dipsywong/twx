{"version":3,"sources":["utils/readFile.ts","components/JsonTree.tsx","components/ClickShowRaw.tsx","utils/copyToClipboard.ts","utils/download.ts","components/EventShower.tsx","components/MissionInfoShower.tsx","components/JsonShower.tsx","components/TwfShower.tsx","utils/twfEventAnalysis.ts","pages/ReadTwfPage.tsx","components/App.tsx","reportWebVitals.ts","index.tsx"],"names":["readFile","target","file","a","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","readAsText","readAsArrayBuffer","readAsBinaryString","Error","readFileAsBinaryString","JsonTree","data","theme","scheme","author","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","ClickShowRaw","raw","defaultShow","name","useState","show","setShow","selected","color","backgroundColor","ButtonGroup","Button","onClick","style","undefined","marginLeft","str","el","document","createElement","value","body","appendChild","select","execCommand","removeChild","copyToClipboard","JSON","stringify","text","filename","element","setAttribute","encodeURIComponent","display","click","download","EventShower","event","eventName","Accordion","AccordionSummary","expandIcon","aria-controls","id","Typography","flex","variant","tag","AccordionDetails","Box","MissionInfoShower","inf","Grid","maxWidth","spacing","container","direction","item","n","dp","split","map","lineBreak","go","fa","cs","join","minp","sn","su","ab","ri","length","JsonShower","json","TwfShower","twf","useMemo","ini","rest","roles","allEvents","musics","tags","Set","Object","entries","forEach","key","startsWith","push","replace","t","add","events","fromEntries","sort","b","uo","console","log","checkExamples","actionExamples","cks","check","type","act","e","twfEventAnalysis","values","Array","from","filterTag","setFilterTag","stopPropagation","height","margin","justifyContent","alignItems","FormControl","InputLabel","Select","onChange","MenuItem","filter","includes","content","ReadTwfPage","setTwf","onDrop","useCallback","acceptedFiles","then","bs","pako","inflate","buf","TextDecoder","decode","s1","start","indexOf","end","lastIndexOf","slice","parse","useDropzone","getRootProps","getInputProps","overflow","Container","marginBottom","flexDirection","alignContent","Paper","padding","App","position","top","left","right","bottom","AppBar","Toolbar","href","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.28416863.chunk.js","sourcesContent":["import pako from 'pako'\n\nconst readFile = (target: string) => async (file: Blob): Promise<string | ArrayBuffer | null | undefined> => new Promise((resolve) => {\n  const reader = new FileReader()\n  reader.addEventListener(\n    'load',\n    (reader) => (\n      resolve(reader?.target?.result)\n    )\n  )\n  switch (target) {\n    case 'readAsDataURL':\n    case 'dataURL':\n    case 'base64':\n      reader.readAsDataURL(file)\n      break\n    case 'readAsText':\n    case 'text':\n      reader.readAsText(file)\n      break\n    case 'buffer':\n    case 'arrayBuffer':\n    case 'readAsArrayBuffer':\n      reader.readAsArrayBuffer(file)\n      break\n    case 'bs':\n    case 'binaryString':\n    case 'readAsBinaryString':\n      reader.readAsBinaryString(file)\n      break\n    default:\n      throw new Error(`readFile received an unknown option ${target}`)\n  }\n})\n\nconst readFileAsDataURL: (file: File) => Promise<string> = readFile('readAsDataURL') as (file: File) => Promise<string>\nconst readFileAsText: (file: File) => Promise<string> = readFile('readAsText') as (file: File) => Promise<string>\nconst readFileAsArrayBuffer: (file: File) => Promise<ArrayBuffer> = readFile('readAsArrayBuffer') as (file: File) => Promise<ArrayBuffer>\nconst readFileAsBinaryString: (file: File) => Promise<string> = readFile('readAsBinaryString') as (file: File) => Promise<string>\nconst readTwxFileAsJson: <T>(file: File) => Promise<T> = (file: File) => (\n  readFileAsBinaryString(file)\n    .then(bs => pako.inflate(bs))\n    .then(buf => new TextDecoder('utf-8').decode(buf))\n    .then((s1 => {\n      const start = s1.indexOf('{')\n      const end = s1.lastIndexOf('}')\n      const s2 = s1.slice(start, end + 1).replace(/([,{])(\\d+):/g, '$1\"$2\":')\n      return s2\n      // return JSON.parse(s2)\n    }))\n    .then(JSON.parse)\n)\nexport default readFile\n\nexport {\n  readFileAsDataURL,\n  readFileAsText,\n  readFileAsArrayBuffer,\n  readFileAsBinaryString,\n  readTwxFileAsJson\n}\n","import React, { FunctionComponent } from 'react'\nimport JSONTree from 'react-json-tree'\n\nexport const JsonTree: FunctionComponent<{data: unknown}> = ({data}) => {\n  return (\n    <JSONTree data={data} theme={{\n          scheme: 'bright',\n          author: 'chris kempson (http://chriskempson.com)',\n          base00: '#000000',\n          base01: '#303030',\n          base02: '#505050',\n          base03: '#b0b0b0',\n          base04: '#d0d0d0',\n          base05: '#e0e0e0',\n          base06: '#f5f5f5',\n          base07: '#ffffff',\n          base08: '#fb0120',\n          base09: '#fc6d24',\n          base0A: '#fda331',\n          base0B: '#a1c659',\n          base0C: '#76c7b7',\n          base0D: '#6fb3d2',\n          base0E: '#d381c3',\n          base0F: '#be643c'\n    }}/>\n  )\n}\n","import { FunctionComponent, useState } from 'react'\nimport { Button, ButtonGroup } from '@material-ui/core'\nimport { JsonTree } from './JsonTree'\nimport { copyToClipboard } from '../utils/copyToClipboard'\nimport { download } from '../utils/download'\n\nexport const ClickShowRaw: FunctionComponent<{ raw: unknown, defaultShow?: number, name?: string }> = ({\n                                                                                                         raw,\n                                                                                                         defaultShow,\n                                                                                                         name\n                                                                                                       }) => {\n  const [show, setShow] = useState(defaultShow ?? 0)\n  const selected = {\n    color: `rgba(0, 0, 0, 0.54)`,\n    backgroundColor: `rgba(0, 0, 0, 0.12)`\n  }\n  return (\n    <>\n      <ButtonGroup>\n        <Button onClick={() => setShow(0)} style={show === 0 ? selected : undefined}>Hide JSON</Button>\n        <Button onClick={() => setShow(1)} style={show === 1 ? selected : undefined}>Tree JSON</Button>\n        <Button onClick={() => setShow(2)} style={show === 2 ? selected : undefined}>Raw JSON</Button>\n      </ButtonGroup>\n      <ButtonGroup style={{marginLeft: '8px'}}>\n        <Button onClick={() => copyToClipboard(JSON.stringify(raw, null, 2))}>Copy JSON</Button>\n        <Button\n          onClick={() => download(JSON.stringify(raw, null, 2), name !== undefined ? `${name}.json` : 'download.json')}>\n          Download JSON\n        </Button>\n      </ButtonGroup>\n      {show === 1 && <JsonTree data={raw}/>}\n      {show === 2 && (\n        <pre>\n          {JSON.stringify(raw, null, 2)}\n        </pre>\n      )}\n    </>\n  )\n\n}\n","export const copyToClipboard = (str: string): void => {\n  const el = document.createElement('textarea')\n  el.value = str\n  document.body.appendChild(el)\n  el.select()\n  document.execCommand('copy')\n  document.body.removeChild(el)\n}\n","export const download = (text: string, filename: string) => {\n  const element = document.createElement('a')\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text))\n  element.setAttribute('download', filename)\n\n  element.style.display = 'none'\n  document.body.appendChild(element)\n\n  element.click()\n\n  document.body.removeChild(element)\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { TwfEvent } from '../type'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const EventShower: FunctionComponent<{ event: TwfEvent, eventName: string }> = ({ event, eventName }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>事件 {eventName}</Typography>\n        <div style={{flex: 1}}/>\n        <Typography variant='caption'>{event.tag}</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Box>\n          <ClickShowRaw raw={event} defaultShow={1}/>\n        </Box>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Grid, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { TwfInf } from '../type'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const MissionInfoShower: FunctionComponent<{ inf: TwfInf }> = ({ inf }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>Mission Info</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Grid style={{maxWidth: '100%'}} spacing={1} container direction={'column'}>\n          <Grid item>mission name: {inf.n}</Grid>\n          <Grid item>mission description:</Grid>\n          <Grid style={{maxWidth: '100%'}}>\n            {inf.dp.split(/[\\n\\r]+/g).map(str => (\n              <div style={{lineBreak: 'auto', maxWidth: '100%'}}>{str}</div>\n            ))}\n          </Grid>\n          <Grid item>mission goal: {inf.go}</Grid>\n          <Grid item>mission fail: {inf.fa}</Grid>\n          <Grid item>camps: {inf.cs.join(',')}</Grid>\n          <Grid item>minplayers: {inf.minp}</Grid>\n          <Grid item>author: {inf.sn} ({inf.su})</Grid>\n          <Grid item>ability: {inf.ab}</Grid>\n          <Grid item>ri: {inf.ri.length > 0 ? inf.ri.join(',') : <i>none</i>}</Grid>\n          <ClickShowRaw raw={inf}/>\n        </Grid>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const JsonShower: FunctionComponent<{ json: unknown, name: string }> = ({ json, name }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>{name}</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Box>\n          <ClickShowRaw raw={json} defaultShow={1}/>\n        </Box>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent, useMemo, useState } from 'react'\nimport { Twf, TwfEvent, TwfMusic, TwfRo } from '../type'\nimport { Box, FormControl, InputLabel, MenuItem, Select } from '@material-ui/core'\nimport { ClickShowRaw } from './ClickShowRaw'\nimport { EventShower } from './EventShower'\nimport { MissionInfoShower } from './MissionInfoShower'\nimport { JsonShower } from './JsonShower'\nimport { twfEventAnalysis } from '../utils/twfEventAnalysis'\n\n\nexport const TwfShower: FunctionComponent<{ twf: Twf }> = ({ twf }) => {\n  const { inf, ini, map, roles, events, musics, tags } = useMemo(() => {\n    const { inf, ini, map, ...rest } = twf\n    const roles: Array<[string, TwfRo]> = []\n    const allEvents: Array<[string, TwfEvent]> = []\n    const musics: Array<[string, TwfMusic]> = []\n    const tags = new Set<string>()\n    Object.entries(rest).forEach(([key, value]) => {\n      if (key.startsWith('ro')) {\n        roles.push([key, value as TwfRo])\n      } else if(key.startsWith('music')) {\n        musics.push([key, value as TwfMusic])\n      }else {\n        const event: TwfEvent = value as TwfEvent\n        allEvents.push([key.replace('evt_', ''), event])\n        event.tag?.split(',').forEach(t => tags.add(t))\n      }\n    })\n    const events: Record<string, TwfEvent> = Object.fromEntries(allEvents.sort((a, b) => a[1].uo - b[1].uo))\n    console.log(twfEventAnalysis(Object.values(events)))\n    return {\n      roles,\n      inf,\n      ini,\n      map,\n      events,\n      musics,\n      tags: Array.from(tags)\n    }\n  }, [twf])\n  const [filterTag, setFilterTag] = useState('')\n  return (\n    <Box onClick={e => e.stopPropagation()} style={{ height: '100%' }}>\n      <Box style={{margin: '8px 0', display: 'flex', justifyContent: 'space-between', alignItems: 'baseline'}}>\n        <Box>\n          <ClickShowRaw raw={twf} name={twf.inf.n}/>\n        </Box>\n        <FormControl>\n          <InputLabel>\n            Tag\n          </InputLabel>\n          <Select value={filterTag} onChange={e => setFilterTag(e.target.value as string)}>\n            <MenuItem value=''> - </MenuItem>\n            {tags.map(t => (\n              <MenuItem key={t} value={t}>{t}</MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </Box>\n      <MissionInfoShower inf={inf}/>\n      <JsonShower json={map} name='map'/>\n      <JsonShower json={ini} name='spawn point'/>\n      <JsonShower json={roles} name={`${roles.length} roles`}/>\n      <JsonShower json={Object.fromEntries(musics)} name={`${musics.length} musics`}/>\n      {Object.entries(events).filter(([_, e]) => filterTag === '' || e.tag?.includes(filterTag)).map(([name, content]) => (\n        <EventShower event={content} eventName={name}/>\n      ))}\n    </Box>\n  )\n}\n","import { TwfAct, TwfCheck, TwfEvent } from '../type'\n\nexport const twfEventAnalysis = (events: TwfEvent[]) => {\n  const checkExamples: Record<string, TwfCheck[]> = {}\n  const actionExamples: Record<string, TwfAct[]> = {}\n  events.forEach(event => {\n    try{\n      event.cks.forEach(check => {\n        if(!(check.type in checkExamples)) {\n          checkExamples[check.type] = [check]\n        }else {\n          checkExamples[check.type].push(check)\n        }\n      })\n      event.act.forEach(act => {\n        if (!(act.type in actionExamples)) {\n          actionExamples[act.type] = [act]\n        }else{\n          actionExamples[act.type].push(act)\n        }\n      })\n    }catch (e) {\n      console.log(event, e)\n    }\n  })\n  return {\n    checkExamples,\n    actionExamples\n  }\n}\n","import React, { useCallback, useState } from 'react'\nimport { Box, Container, Paper } from '@material-ui/core'\nimport { useDropzone } from 'react-dropzone'\nimport { readTwxFileAsJson } from '../utils/readFile'\nimport { Twf } from '../type'\nimport { TwfShower } from '../components/TwfShower'\n\n\nexport const ReadTwfPage = () => {\n  const [twf, setTwf] = useState<Twf | null>(null)\n  const onDrop = useCallback((acceptedFiles) => {\n    readTwxFileAsJson<Twf>(acceptedFiles[0])\n      .then(setTwf)\n  }, [])\n  const { getRootProps, getInputProps } = useDropzone({ onDrop })\n  return (\n    <Box style={{ flex: 1, overflow: 'auto' }} {...(twf === null ? getRootProps() : {})} >\n      <Container style={{ height: '100%', marginBottom: '16px' }}>\n        <input {...getInputProps()} />\n        {\n          // isDragActive ?\n          //   <p>Drop the files here ...</p> :\n          //   <p>Drag 'n' drop some files here, or click to select files</p>\n        }\n        {twf === null && <Box style={{\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignContent: 'center',\n          height: '100%'\n        }}>\n          <Box>\n            <Paper style={{ padding: '30px' }}>\n              Drag and drop a twf file here, or click to open\n            </Paper>\n          </Box>\n        </Box>}\n        {twf !== null && <TwfShower twf={twf}/>}\n      </Container>\n    </Box>\n  )\n}\n","import React from 'react'\nimport { AppBar, Box, Button, ButtonGroup, Toolbar, Typography } from '@material-ui/core'\nimport { HashRouter, Route, Switch } from 'react-router-dom'\nimport { ReadTwfPage } from '../pages/ReadTwfPage'\n\nfunction App () {\n  return (\n    <HashRouter>\n      <Box flexDirection='column' style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, display: 'flex' }}>\n        <AppBar position=\"static\">\n          <Toolbar style={{ display: 'flex', justifyContent: 'space-between' }}>\n            <Typography variant=\"h6\">\n              同人陣讀檔器\n            </Typography>\n            <ButtonGroup variant='text' color='inherit'>\n              <Button href={'//dipsy.me/twmap/'}>\n                舊讀檔器(twf,twm,twr,var,sav)\n              </Button>\n              <Button href={'//gamelet.online/'}>\n                嘎姆擂台\n              </Button>\n              <Button href={'//code.gamelet.com/'}>\n                Code.Gamelet\n              </Button>\n              <Button href={'https://light-up.gamelet.online/'}>\n                光影迷城\n              </Button>\n              <Button href={'https://poker99.gamelet.online/'}>\n                童話99\n              </Button>\n              <Button href={'https://magile.gamelet.online/'}>\n                魔法飛彈大作戰\n              </Button>\n            </ButtonGroup>\n          </Toolbar>\n        </AppBar>\n        <Switch>\n          <Route path=\"/\">\n            <ReadTwfPage/>\n          </Route>\n        </Switch>\n      </Box>\n    </HashRouter>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './components/App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}