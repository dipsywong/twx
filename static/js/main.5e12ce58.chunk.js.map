{"version":3,"sources":["utils/readFile.ts","components/JsonTree.tsx","components/ClickShowRaw.tsx","utils/copyToClipboard.ts","utils/download.ts","components/EventShower.tsx","components/MissionInfoShower.tsx","components/JsonShower.tsx","components/TwfShower.tsx","utils/twfEventAnalysis.ts","pages/ReadTwfPage.tsx","components/App.tsx","reportWebVitals.ts","index.tsx"],"names":["readFile","target","file","a","Promise","resolve","reader","FileReader","addEventListener","result","readAsDataURL","readAsText","readAsArrayBuffer","readAsBinaryString","Error","readFileAsBinaryString","JsonTree","data","theme","scheme","author","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","ClickShowRaw","raw","defaultShow","name","useState","show","setShow","selected","color","backgroundColor","ButtonGroup","Button","onClick","style","undefined","marginLeft","str","el","document","createElement","value","body","appendChild","select","execCommand","removeChild","copyToClipboard","JSON","stringify","text","filename","element","setAttribute","encodeURIComponent","display","click","download","EventShower","event","eventName","eventMetaString","useMemo","strs","itime","push","delay","rep","repInt","recInt","knownKeys","Object","keys","forEach","k","includes","console","error","join","Accordion","AccordionSummary","expandIcon","aria-controls","id","Typography","component","variant","alignSelf","flex","tag","AccordionDetails","Box","MissionInfoShower","inf","Grid","maxWidth","spacing","container","direction","item","n","dp","split","map","lineBreak","go","fa","cs","minp","sn","su","ab","ri","length","JsonShower","json","TwfShower","twf","ini","rest","roles","allEvents","musics","tags","Set","entries","key","startsWith","replace","t","add","events","fromEntries","sort","b","uo","log","checkExamples","actionExamples","cks","check","type","act","e","twfEventAnalysis","values","Array","from","filterTag","setFilterTag","stopPropagation","height","margin","justifyContent","alignItems","FormControl","InputLabel","Select","onChange","MenuItem","filter","content","ReadTwfPage","setTwf","onDrop","useCallback","acceptedFiles","then","bs","pako","inflate","buf","TextDecoder","decode","s1","start","indexOf","end","lastIndexOf","slice","parse","useDropzone","getRootProps","getInputProps","overflow","Container","marginBottom","flexDirection","alignContent","Paper","padding","App","position","top","left","right","bottom","AppBar","Toolbar","href","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.5e12ce58.chunk.js","sourcesContent":["import pako from 'pako'\n\nconst readFile = (target: string) => async (file: Blob): Promise<string | ArrayBuffer | null | undefined> => new Promise((resolve) => {\n  const reader = new FileReader()\n  reader.addEventListener(\n    'load',\n    (reader) => (\n      resolve(reader?.target?.result)\n    )\n  )\n  switch (target) {\n    case 'readAsDataURL':\n    case 'dataURL':\n    case 'base64':\n      reader.readAsDataURL(file)\n      break\n    case 'readAsText':\n    case 'text':\n      reader.readAsText(file)\n      break\n    case 'buffer':\n    case 'arrayBuffer':\n    case 'readAsArrayBuffer':\n      reader.readAsArrayBuffer(file)\n      break\n    case 'bs':\n    case 'binaryString':\n    case 'readAsBinaryString':\n      reader.readAsBinaryString(file)\n      break\n    default:\n      throw new Error(`readFile received an unknown option ${target}`)\n  }\n})\n\nconst readFileAsDataURL: (file: File) => Promise<string> = readFile('readAsDataURL') as (file: File) => Promise<string>\nconst readFileAsText: (file: File) => Promise<string> = readFile('readAsText') as (file: File) => Promise<string>\nconst readFileAsArrayBuffer: (file: File) => Promise<ArrayBuffer> = readFile('readAsArrayBuffer') as (file: File) => Promise<ArrayBuffer>\nconst readFileAsBinaryString: (file: File) => Promise<string> = readFile('readAsBinaryString') as (file: File) => Promise<string>\nconst readTwxFileAsJson: <T>(file: File) => Promise<T> = (file: File) => (\n  readFileAsBinaryString(file)\n    .then(bs => pako.inflate(bs))\n    .then(buf => new TextDecoder('utf-8').decode(buf))\n    .then((s1 => {\n      const start = s1.indexOf('{')\n      const end = s1.lastIndexOf('}')\n      const s2 = s1.slice(start, end + 1).replace(/([,{])(\\d+):/g, '$1\"$2\":')\n      return s2\n      // return JSON.parse(s2)\n    }))\n    .then(JSON.parse)\n)\nexport default readFile\n\nexport {\n  readFileAsDataURL,\n  readFileAsText,\n  readFileAsArrayBuffer,\n  readFileAsBinaryString,\n  readTwxFileAsJson\n}\n","import React, { FunctionComponent } from 'react'\nimport JSONTree from 'react-json-tree'\n\nexport const JsonTree: FunctionComponent<{data: unknown}> = ({data}) => {\n  return (\n    <JSONTree data={data} theme={{\n          scheme: 'bright',\n          author: 'chris kempson (http://chriskempson.com)',\n          base00: '#000000',\n          base01: '#303030',\n          base02: '#505050',\n          base03: '#b0b0b0',\n          base04: '#d0d0d0',\n          base05: '#e0e0e0',\n          base06: '#f5f5f5',\n          base07: '#ffffff',\n          base08: '#fb0120',\n          base09: '#fc6d24',\n          base0A: '#fda331',\n          base0B: '#a1c659',\n          base0C: '#76c7b7',\n          base0D: '#6fb3d2',\n          base0E: '#d381c3',\n          base0F: '#be643c'\n    }}/>\n  )\n}\n","import { FunctionComponent, useState } from 'react'\nimport { Button, ButtonGroup } from '@material-ui/core'\nimport { JsonTree } from './JsonTree'\nimport { copyToClipboard } from '../utils/copyToClipboard'\nimport { download } from '../utils/download'\n\nexport const ClickShowRaw: FunctionComponent<{ raw: unknown, defaultShow?: number, name?: string }> = ({\n                                                                                                         raw,\n                                                                                                         defaultShow,\n                                                                                                         name\n                                                                                                       }) => {\n  const [show, setShow] = useState(defaultShow ?? 0)\n  const selected = {\n    color: `rgba(0, 0, 0, 0.54)`,\n    backgroundColor: `rgba(0, 0, 0, 0.12)`\n  }\n  return (\n    <>\n      <ButtonGroup>\n        <Button onClick={() => setShow(0)} style={show === 0 ? selected : undefined}>Hide JSON</Button>\n        <Button onClick={() => setShow(1)} style={show === 1 ? selected : undefined}>Tree JSON</Button>\n        <Button onClick={() => setShow(2)} style={show === 2 ? selected : undefined}>Raw JSON</Button>\n      </ButtonGroup>\n      <ButtonGroup style={{marginLeft: '8px'}}>\n        <Button onClick={() => copyToClipboard(JSON.stringify(raw, null, 2))}>Copy JSON</Button>\n        <Button\n          onClick={() => download(JSON.stringify(raw, null, 2), name !== undefined ? `${name}.json` : 'download.json')}>\n          Download JSON\n        </Button>\n      </ButtonGroup>\n      {show === 1 && <JsonTree data={raw}/>}\n      {show === 2 && (\n        <pre>\n          {JSON.stringify(raw, null, 2)}\n        </pre>\n      )}\n    </>\n  )\n\n}\n","export const copyToClipboard = (str: string): void => {\n  const el = document.createElement('textarea')\n  el.value = str\n  document.body.appendChild(el)\n  el.select()\n  document.execCommand('copy')\n  document.body.removeChild(el)\n}\n","export const download = (text: string, filename: string) => {\n  const element = document.createElement('a')\n  element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text))\n  element.setAttribute('download', filename)\n\n  element.style.display = 'none'\n  document.body.appendChild(element)\n\n  element.click()\n\n  document.body.removeChild(element)\n}\n","import React, { FunctionComponent, useMemo } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { TwfEvent } from '../type'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const EventShower: FunctionComponent<{ event: TwfEvent, eventName: string }> = ({ event, eventName }) => {\n  const eventMetaString: string = useMemo(() => {\n    let strs = []\n    if(event.itime) {\n      strs.push(`啟動時間或${event.itime}毫秒`)\n    }\n    if(event.delay) {\n      strs.push(`延遲發動${event.delay}毫秒`)\n    }\n    if(event.rep) {\n      strs.push(`重複${event.rep}次`)\n    }\n    if(event.repInt) {\n      strs.push(`重複間隔${event.repInt}毫秒`)\n    }\n    if(event.recInt) {\n      strs.push(`重複檢查間隔${event.recInt}毫秒`)\n    }\n    const knownKeys = [\n      'tag',\n      'act',\n      'uo',\n      'cks',\n      'repInt',\n      'rep',\n      'itime',\n      'delay',\n      'recInt'\n    ]\n    Object.keys(event).forEach(k => {\n      if(!knownKeys.includes(k)) {\n        console.error(`event ${eventName} contains unknown key ${k}`)\n      }\n    })\n    return strs.join(',')\n  },[event, eventName])\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>事件 {eventName}</Typography>\n        {eventMetaString !== '' &&\n            <Typography component='p' variant='caption' style={{alignSelf: 'baseline', marginLeft: '8px'}}>\n              {eventMetaString}\n            </Typography>\n        }\n        <div style={{flex: 1}}/>\n        <Typography component='p' variant='caption' style={{alignSelf: 'baseline'}}>{event.tag}</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Box>\n          <ClickShowRaw raw={event} defaultShow={1}/>\n        </Box>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Grid, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { TwfInf } from '../type'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const MissionInfoShower: FunctionComponent<{ inf: TwfInf }> = ({ inf }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>Mission Info</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Grid style={{maxWidth: '100%'}} spacing={1} container direction={'column'}>\n          <Grid item>mission name: {inf.n}</Grid>\n          <Grid item>mission description:</Grid>\n          <Grid style={{maxWidth: '100%'}}>\n            {inf.dp.split(/[\\n\\r]+/g).map((str, k) => (\n              <div key={k} style={{lineBreak: 'auto', maxWidth: '100%'}}>{str}</div>\n            ))}\n          </Grid>\n          <Grid item>mission goal: {inf.go}</Grid>\n          <Grid item>mission fail: {inf.fa}</Grid>\n          <Grid item>camps: {inf.cs.join(',')}</Grid>\n          <Grid item>minplayers: {inf.minp}</Grid>\n          <Grid item>author: {inf.sn} ({inf.su})</Grid>\n          <Grid item>ability: {inf.ab}</Grid>\n          <Grid item>ri: {inf.ri.length > 0 ? inf.ri.join(',') : <i>none</i>}</Grid>\n          <ClickShowRaw raw={inf}/>\n        </Grid>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent } from 'react'\nimport { Accordion, AccordionDetails, AccordionSummary, Box, Typography } from '@material-ui/core'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { ClickShowRaw } from './ClickShowRaw'\n\nexport const JsonShower: FunctionComponent<{ json: unknown, name: string }> = ({ json, name }) => {\n  return (\n    <Accordion>\n      <AccordionSummary\n        expandIcon={<ExpandMoreIcon/>}\n        aria-controls=\"panel1a-content\"\n        id=\"panel1a-header\"\n      >\n        <Typography>{name}</Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        <Box>\n          <ClickShowRaw raw={json} defaultShow={1}/>\n        </Box>\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n","import React, { FunctionComponent, useMemo, useState } from 'react'\nimport { Twf, TwfEvent, TwfMusic, TwfRo } from '../type'\nimport { Box, FormControl, InputLabel, MenuItem, Select } from '@material-ui/core'\nimport { ClickShowRaw } from './ClickShowRaw'\nimport { EventShower } from './EventShower'\nimport { MissionInfoShower } from './MissionInfoShower'\nimport { JsonShower } from './JsonShower'\nimport { twfEventAnalysis } from '../utils/twfEventAnalysis'\n\n\nexport const TwfShower: FunctionComponent<{ twf: Twf }> = ({ twf }) => {\n  const { inf, ini, map, roles, events, musics, tags } = useMemo(() => {\n    const { inf, ini, map, ...rest } = twf\n    const roles: Array<[string, TwfRo]> = []\n    const allEvents: Array<[string, TwfEvent]> = []\n    const musics: Array<[string, TwfMusic]> = []\n    const tags = new Set<string>()\n    Object.entries(rest).forEach(([key, value]) => {\n      if (key.startsWith('ro')) {\n        roles.push([key, value as TwfRo])\n      } else if (key.startsWith('music')) {\n        musics.push([key, value as TwfMusic])\n      } else {\n        const event: TwfEvent = value as TwfEvent\n        allEvents.push([key.replace('evt_', ''), event])\n        event.tag?.split(',').forEach(t => tags.add(t))\n      }\n    })\n    const events: Record<string, TwfEvent> = Object.fromEntries(allEvents.sort((a, b) => a[1].uo - b[1].uo))\n    console.log(twfEventAnalysis(Object.values(events)))\n    return {\n      roles,\n      inf,\n      ini,\n      map,\n      events,\n      musics,\n      tags: Array.from(tags)\n    }\n  }, [twf])\n  const [filterTag, setFilterTag] = useState('')\n  return (\n    <Box onClick={e => e.stopPropagation()} style={{ height: '100%' }}>\n      <Box style={{ margin: '8px 0', display: 'flex', justifyContent: 'space-between', alignItems: 'baseline' }}>\n        <Box>\n          <ClickShowRaw raw={twf} name={twf.inf.n}/>\n        </Box>\n        <FormControl>\n          <InputLabel>\n            Tag\n          </InputLabel>\n          <Select value={filterTag} onChange={e => setFilterTag(e.target.value as string)}>\n            <MenuItem value=''> - </MenuItem>\n            {tags.map(t => (\n              <MenuItem key={t} value={t}>{t}</MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n      </Box>\n      <MissionInfoShower inf={inf}/>\n      <JsonShower json={map} name='map'/>\n      <JsonShower json={ini} name='spawn point'/>\n      <JsonShower json={roles} name={`${roles.length} roles`}/>\n      <JsonShower json={Object.fromEntries(musics)} name={`${musics.length} musics`}/>\n      {Object.entries(events).filter(([_, e]) => filterTag === '' || e.tag?.includes(filterTag)).map(([name, content]) => (\n        <EventShower key={name} event={content} eventName={name}/>\n      ))}\n    </Box>\n  )\n}\n","import { TwfAct, TwfCheck, TwfEvent } from '../type'\n\nexport const twfEventAnalysis = (events: TwfEvent[]) => {\n  const checkExamples: Record<string, TwfCheck[]> = {}\n  const actionExamples: Record<string, TwfAct[]> = {}\n  events.forEach(event => {\n    try{\n      event.cks.forEach(check => {\n        if(!(check.type in checkExamples)) {\n          checkExamples[check.type] = [check]\n        }else {\n          checkExamples[check.type].push(check)\n        }\n      })\n      event.act.forEach(act => {\n        if (!(act.type in actionExamples)) {\n          actionExamples[act.type] = [act]\n        }else{\n          actionExamples[act.type].push(act)\n        }\n      })\n    }catch (e) {\n      console.log(event, e)\n    }\n  })\n  return {\n    checkExamples,\n    actionExamples\n  }\n}\n","import React, { useCallback, useState } from 'react'\nimport { Box, Container, Paper } from '@material-ui/core'\nimport { useDropzone } from 'react-dropzone'\nimport { readTwxFileAsJson } from '../utils/readFile'\nimport { Twf } from '../type'\nimport { TwfShower } from '../components/TwfShower'\n\n\nexport const ReadTwfPage = () => {\n  const [twf, setTwf] = useState<Twf | null>(null)\n  const onDrop = useCallback((acceptedFiles) => {\n    readTwxFileAsJson<Twf>(acceptedFiles[0])\n      .then(setTwf)\n  }, [])\n  const { getRootProps, getInputProps } = useDropzone({ onDrop })\n  return (\n    <Box style={{ flex: 1, overflow: 'auto' }} {...(twf === null ? getRootProps() : {})} >\n      <Container style={{ height: '100%', marginBottom: '16px' }}>\n        <input {...getInputProps()} />\n        {\n          // isDragActive ?\n          //   <p>Drop the files here ...</p> :\n          //   <p>Drag 'n' drop some files here, or click to select files</p>\n        }\n        {twf === null && <Box style={{\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          alignContent: 'center',\n          height: '100%'\n        }}>\n          <Box>\n            <Paper style={{ padding: '30px' }}>\n              Drag and drop a twf file here, or click to open\n            </Paper>\n          </Box>\n        </Box>}\n        {twf !== null && <TwfShower twf={twf}/>}\n      </Container>\n    </Box>\n  )\n}\n","import React from 'react'\nimport { AppBar, Box, Button, ButtonGroup, Toolbar, Typography } from '@material-ui/core'\nimport { HashRouter, Route, Switch } from 'react-router-dom'\nimport { ReadTwfPage } from '../pages/ReadTwfPage'\nimport './App.css'\n\nfunction App () {\n  return (\n    <HashRouter>\n      <Box flexDirection='column' style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, display: 'flex' }}>\n        <AppBar position=\"static\">\n          <Toolbar style={{ display: 'flex', justifyContent: 'space-between' }}>\n            <Typography variant=\"h6\">\n              同人陣讀檔器\n            </Typography>\n            <ButtonGroup variant='text' color='inherit'>\n              <Button href={'//dipsy.me/twmap/'}>\n                舊讀檔器(twf,twm,twr,var,sav)\n              </Button>\n              <Button href={'//gamelet.online/'}>\n                嘎姆擂台\n              </Button>\n              <Button href={'//code.gamelet.com/'}>\n                Code.Gamelet\n              </Button>\n              <Button href={'https://light-up.gamelet.online/'}>\n                光影迷城\n              </Button>\n              <Button href={'https://poker99.gamelet.online/'}>\n                童話99\n              </Button>\n              <Button href={'https://magile.gamelet.online/'}>\n                魔法飛彈大作戰\n              </Button>\n            </ButtonGroup>\n          </Toolbar>\n        </AppBar>\n        <Switch>\n          <Route path=\"/\">\n            <ReadTwfPage/>\n          </Route>\n        </Switch>\n      </Box>\n    </HashRouter>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './components/App'\nimport reportWebVitals from './reportWebVitals'\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}